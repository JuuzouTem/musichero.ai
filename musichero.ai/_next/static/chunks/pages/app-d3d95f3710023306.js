(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6366],{66898:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app",function(){return s(20356)}])},25206:function(e,t){"use strict";t.Z={src:"/_next/static/media/music_failed.1b2229ec.svg",height:16,width:16,blurWidth:0,blurHeight:0}},21576:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(15311);s(20132);var l=s(96367);function r(e){let{setMaintenanceTipsFlag:t,tipsMessage:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"fixed left-0 top-0 z-[99] flex h-full w-full items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"relative flex w-full max-w-md flex-col items-center justify-center rounded-lg bg-gradient-to-br from-gray-300 to-gray-300 p-6 shadow-xl md:w-auto lg:p-8",children:[(0,a.jsx)(l.n,{onClick:()=>{t(!1)},icon:"close",className:"absolute right-3 top-3 h-5 w-5 cursor-pointer fill-gray-400 transition duration-300 hover:fill-white"}),(0,a.jsx)("div",{className:"mt-4 w-full whitespace-pre-line text-center text-lg text-black",children:s})]})})})}},21164:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var a=s(15311);s(20132);var l=s(48846);s(6381);var r=s(74034),n=s.n(r),i=s(5762),o=s(5724),c=s(25733),d=e=>{let{icon:t,className:s,...l}=e;return(0,a.jsx)("span",{...l,children:(()=>{switch(t){case"wave_play":return(0,a.jsxs)("svg",{"aria-hidden":"true",viewBox:"0 0 1024 1024",className:s,preserveAspectRatio:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M772.7 217.7a32.2 32.1 0 1 0 64.4 0 32.2 32.1 0 1 0-64.4 0Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M415.8 679.9c5.9 0 11.5-1.6 16.2-4.5l231.1-134.6c10.9-5.2 18.5-16.3 18.5-29.2 0-11.9-6.4-22.3-16-27.8L439.7 352.2c-5.8-6.7-14.4-10.9-23.9-10.9-17.6 0-31.8 14.4-31.8 32.1 0 0.6 0 1.2 0.1 1.8l-0.4 0.2 0.5 269c-0.1 1.1-0.2 2.2-0.2 3.4 0 17.7 14.3 32.1 31.8 32.1z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M909.8 306.6c-5.4-10.5-16.3-17.8-28.9-17.8-17.8 0-32.2 14.4-32.2 32.1 0 6 1.7 11.7 4.6 16.5l-0.1 0.1c26.9 52.4 42.1 111.8 42.1 174.7 0 211.6-171.6 383.2-383.2 383.2S128.8 723.8 128.8 512.2 300.4 129.1 512 129.1c62.5 0 121.5 15 173.6 41.5l0.2-0.4c4.6 2.6 10 4.1 15.7 4.1 17.8 0 32.2-14.4 32.2-32.1 0-13.1-7.9-24.4-19.3-29.4C653.6 81.9 584.9 64.5 512 64.5 264.7 64.5 64.3 265 64.3 512.2S264.7 959.9 512 959.9s447.7-200.4 447.7-447.7c0-74.1-18-144-49.9-205.6z"})]});case"wave_pause":return(0,a.jsxs)("svg",{"aria-hidden":"true",viewBox:"0 0 1024 1024",className:s,preserveAspectRatio:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M910.8 303.6c-5.4-10.5-16.3-17.8-28.9-17.8-17.8 0-32.2 14.4-32.2 32.1 0 6 1.7 11.7 4.6 16.5l-0.1 0.1c26.9 52.4 42.1 111.8 42.1 174.7 0 211.6-171.6 383.2-383.2 383.2S129.8 720.8 129.8 509.2 301.4 126.1 513 126.1c62.5 0 121.5 15 173.6 41.5l0.2-0.4c4.6 2.6 10 4.1 15.7 4.1 17.8 0 32.2-14.4 32.2-32.1 0-13.1-7.9-24.4-19.3-29.4C654.6 78.9 585.9 61.5 513 61.5 265.7 61.5 65.3 262 65.3 509.2S265.7 956.9 513 956.9s447.7-200.4 447.7-447.7c0-74.1-18-144-49.9-205.6z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M385.4 352.2V672c0 17.5 14.3 31.9 31.9 31.9 17.6 0 32-14.4 31.9-31.9V352.2c0-17.5-14.3-31.9-31.9-31.9-17.5 0-31.9 14.3-31.9 31.9zM578.9 352.2V672c0 17.5 14.3 31.9 31.9 31.9 17.5 0 31.9-14.4 31.9-31.9V352.2c0-17.5-14.3-31.9-31.9-31.9-17.5 0-31.9 14.3-31.9 31.9z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M772.7 217.7a32.2 32.1 0 1 0 64.4 0 32.2 32.1 0 1 0-64.4 0Z"})]});case"wave_rewind":return(0,a.jsxs)("svg",{className:s,fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.22 11.03a.75.75 0 1 0 1.06-1.06l-1.06 1.06ZM3 6.75l-.53-.53a.75.75 0 0 0 0 1.06L3 6.75Zm4.28-3.22a.75.75 0 0 0-1.06-1.06l1.06 1.06ZM13.5 18a.75.75 0 0 0 0 1.5V18ZM7.28 9.97 3.53 6.22 2.47 7.28l3.75 3.75 1.06-1.06ZM3.53 7.28l3.75-3.75-1.06-1.06-3.75 3.75 1.06 1.06Zm16.72 5.47c0 2.9-2.35 5.25-5.25 5.25v1.5a6.75 6.75 0 0 0 6.75-6.75h-1.5ZM15 7.5c2.9 0 5.25 2.35 5.25 5.25h1.5A6.75 6.75 0 0 0 15 6v1.5ZM15 6H3v1.5h12V6Zm0 12h-1.5v1.5H15V18Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 15.75h.75V21",stroke:"#64748B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16.5A.75.75 0 0 0 9 15v1.5Zm-2.25-.75V15a.75.75 0 0 0-.75.75h.75Zm0 2.25H6c0 .414.336.75.75.75V18Zm0 2.25a.75.75 0 0 0 0 1.5v-1.5ZM9 15H6.75v1.5H9V15Zm-3 .75V18h1.5v-2.25H6Zm.75 3h1.5v-1.5h-1.5v1.5Zm1.5 1.5h-1.5v1.5h1.5v-1.5ZM9 19.5a.75.75 0 0 1-.75.75v1.5a2.25 2.25 0 0 0 2.25-2.25H9Zm-.75-.75a.75.75 0 0 1 .75.75h1.5a2.25 2.25 0 0 0-2.25-2.25v1.5Z"})]});case"wave_forward":return(0,a.jsx)("svg",{className:s,fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.72 9.97a.75.75 0 1 0 1.06 1.06l-1.06-1.06ZM21 6.75l.53.53a.75.75 0 0 0 0-1.06l-.53.53Zm-3.22-4.28a.75.75 0 1 0-1.06 1.06l1.06-1.06ZM10.5 19.5a.75.75 0 0 0 0-1.5v1.5Zm3.75-4.5a.75.75 0 0 0 0 1.5V15Zm.75.75h.75A.75.75 0 0 0 15 15v.75ZM14.25 21a.75.75 0 0 0 1.5 0h-1.5Zm6-4.5a.75.75 0 0 0 0-1.5v1.5ZM18 15.75V15a.75.75 0 0 0-.75.75H18ZM18 18h-.75c0 .414.336.75.75.75V18Zm0 2.25a.75.75 0 0 0 0 1.5v-1.5Zm-.22-9.22 3.75-3.75-1.06-1.06-3.75 3.75 1.06 1.06Zm3.75-4.81-3.75-3.75-1.06 1.06 3.75 3.75 1.06-1.06ZM2.25 12.75A6.75 6.75 0 0 0 9 19.5V18a5.25 5.25 0 0 1-5.25-5.25h-1.5ZM9 6a6.75 6.75 0 0 0-6.75 6.75h1.5C3.75 9.85 6.1 7.5 9 7.5V6Zm0 1.5h12V6H9v1.5Zm0 12h1.5V18H9v1.5Zm5.25-3H15V15h-.75v1.5Zm0-.75V21h1.5v-5.25h-1.5Zm6-.75H18v1.5h2.25V15Zm-3 .75V18h1.5v-2.25h-1.5Zm.75 3h1.5v-1.5H18v1.5Zm1.5 1.5H18v1.5h1.5v-1.5Zm.75-.75a.75.75 0 0 1-.75.75v1.5a2.25 2.25 0 0 0 2.25-2.25h-1.5Zm-.75-.75a.75.75 0 0 1 .75.75h1.5a2.25 2.25 0 0 0-2.25-2.25v1.5Z"})});case"wave_sound_open":return(0,a.jsx)("svg",{"aria-hidden":"true",viewBox:"0 0 1024 1024",className:s,preserveAspectRatio:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M469.333333 106.666667v810.666666a21.333333 21.333333 0 0 1-36.42 15.086667L225.833333 725.333333H53.333333a53.393333 53.393333 0 0 1-53.333333-53.333333V352a53.393333 53.393333 0 0 1 53.333333-53.333333h172.5l207.08-207.086667A21.333333 21.333333 0 0 1 469.333333 106.666667z m146.793334 296.2a21.333333 21.333333 0 0 0-3.526667 29.96 127.366667 127.366667 0 0 1 0 158.346666 21.333333 21.333333 0 0 0 33.493333 26.433334 170.733333 170.733333 0 0 0 0-211.213334 21.333333 21.333333 0 0 0-29.966666-3.526666z m212.213333-19.3A339.393333 339.393333 0 0 0 753.333333 270.666667a346.585333 346.585333 0 0 0-22.046666-20.213334 21.333333 21.333333 0 1 0-27.446667 32.666667c6.666667 5.586667 13.146667 11.553333 19.333333 17.726667C779.6 357.22 810.666667 432.22 810.666667 512s-31.066667 154.78-87.48 211.186667c-6.173333 6.173333-12.666667 12.14-19.333334 17.726666a21.333333 21.333333 0 1 0 27.446667 32.666667 346.585333 346.585333 0 0 0 22.046667-20.213333 341.706667 341.706667 0 0 0 74.98-369.793334z"})});case"wave_sound_close":return(0,a.jsx)("svg",{"aria-hidden":"true",viewBox:"0 0 1024 1024",className:s,preserveAspectRatio:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.002433 672V352a53.393333 53.393333 0 0 1 53.333334-53.333333h172.5l207.08-207.086667A21.333333 21.333333 0 0 1 469.335767 106.666667v189.413333L41.435767 724A53.42 53.42 0 0 1 0.002433 672z m633.753334-452.42a21.333333 21.333333 0 0 0-30.173334 0l-597.333333 597.333333a21.333333 21.333333 0 0 0 30.173333 30.173334L158.1691 725.333333h67.666667l207.08 207.086667A21.333333 21.333333 0 0 0 469.335767 917.333333V414.166667l164.42-164.413334a21.333333 21.333333 0 0 0 0-30.173333z"})});default:return""}})()})},u=s(96367),m=s(49163);let x=(0,l.Pi)(e=>{let{generateLoading:t,setShowMobileCreateDrawer:s,setSelectItemDialog:l,selectRecordItem:r,playing:x,audioAutoPlay:p,isMusicGeneratePage:h}=e,{t:f}=(0,o.Z)("common"),g=(0,i.useRouter)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"z-[12] flex max-h-32 w-full cursor-default flex-col items-start justify-end bg-white/10 lg:hidden",children:[r&&r.item?.audioUrl&&(0,a.jsxs)("div",{className:"flex h-16 w-full items-center justify-between gap-2 bg-white/10 px-4 backdrop-blur-md",children:[(0,a.jsxs)("div",{onClick:h?()=>l(!0):void 0,className:"flex w-[85%] items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex aspect-square w-10 items-center justify-center",children:[(0,a.jsx)(n(),{src:r.item.imageUrl||"/images/logos/logo.svg",alt:"img",width:30,height:30,className:"aspect-square w-full cursor-pointer rounded-full object-cover"}),h&&(0,a.jsx)(u.n,{icon:"music_double_arrow",className:"absolute inset-0 m-auto w-4 animate-bounce fill-neutral-900"})]}),(0,a.jsx)("p",{className:"w-[80%] truncate text-sm text-neutral-900",children:r.item.title||r.record.paramData?.prompt})]}),(0,a.jsx)(d,{onClick:p,icon:x?"wave_pause":"wave_play",className:"w-8 fill-neutral-900"})]}),"/app"===g.pathname&&(0,a.jsx)("div",{className:(0,m.cn)("grid h-16 w-full items-center justify-center gap-2 bg-neutral-100 text-center text-xs"),children:(0,a.jsx)("div",{className:"border-l border-white/15",children:(0,a.jsx)("button",{onClick:()=>s(!0),className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-pink-500 via-amber-500 to-orange-500",children:t?(0,a.jsx)(c.Z,{color:"#FFFFFF",margin:0,size:5}):(0,a.jsx)(u.n,{icon:"music_create",className:"w-7 fill-white"})})})})]})})})},18865:function(e,t,s){"use strict";var a=s(15311),l=s(20132);t.Z=e=>{let{tags:t,showAllTags:s}=e,[r,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(0);return(0,l.useEffect)(()=>{if(t){let e=t.split(/[,， ]+/);o(e.length),n(s?e:e.slice(0,2))}else o(0),n([])},[t]),(0,a.jsxs)("p",{className:"flex w-full flex-wrap items-center gap-1 text-xs text-neutral-600",children:[r.map((e,t)=>(0,a.jsx)("span",{className:"rounded-full bg-black/5 px-2 py-1",children:e.length>5?e.slice(0,5)+"...":e},t)),!s&&i>2&&(0,a.jsx)("span",{className:"rounded-full bg-white/5 px-2 py-1",children:"\xb7\xb7\xb7"})]})}},89083:function(e,t,s){"use strict";s.d(t,{x:function(){return c}});var a=s(15311),l=s(20132),r=s(5724),n=s(6381),i=s.n(n),o=s(96367);function c(){let{t:e}=(0,r.Z)("common"),[t,s]=(0,l.useState)(!0);return t?(0,a.jsxs)("div",{className:"flex w-full items-center gap-2 rounded bg-amber-500/5 px-3 py-2 text-xs text-neutral-700 backdrop-blur-md",children:[(0,a.jsxs)("div",{className:"flex flex-1 items-start gap-2",children:[(0,a.jsx)(o.n,{icon:"music_notice",className:"w-4 fill-amber-500"}),(0,a.jsxs)("p",{children:[e("app.savedTips"),(0,a.jsx)(i(),{href:"/pricing",className:"ml-1 text-amber-500 underline",children:e("app.upgradeModal.title")})]})]}),(0,a.jsx)(o.n,{onClick:()=>s(!1),icon:"close",className:"w-2.5 cursor-pointer fill-neutral-400 transition duration-500 hover:fill-neutral-700"})]}):null}},17931:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(15311);s(20132);var l=s(5724),r=s(39912),n=s(6381),i=s.n(n);function o(e){let{isBuyVipDialog:t,setIsBuyVipDialog:s}=e,{t:n}=(0,l.Z)("common");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(r.cZ,{children:[(0,a.jsxs)(r.fK,{children:[(0,a.jsx)(r.$N,{children:n("app.noGenerationsDialog.title")}),(0,a.jsx)(r.Be,{className:"flex w-full flex-col items-start space-y-4",children:(0,a.jsx)("p",{className:"w-full whitespace-pre-line break-words py-6 text-center text-lg font-medium text-gray-800",children:n("app.noGenerationsDialog.content")})})]}),(0,a.jsx)(r.cN,{children:(0,a.jsx)("div",{className:"flex w-full items-center justify-center gap-4",children:(0,a.jsx)(i(),{href:"/pricing",className:"rounded-md bg-orange-600 px-4 py-2 text-base text-white outline-none transition duration-500 hover:bg-orange-500 focus:outline-none",children:n("app.noGenerationsDialog.btn")})})})]})})})}},94842:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(15311);s(20132);var l=s(5724),r=s(39912),n=s(6381),i=s.n(n);function o(e){let{isLimitNoticeDialog:t,setIsLimitNoticeDialog:s}=e,{t:n}=(0,l.Z)("common");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(r.cZ,{children:[(0,a.jsxs)(r.fK,{children:[(0,a.jsx)(r.$N,{children:n("app.limitNoticeDialog.title")}),(0,a.jsx)(r.Be,{className:"flex w-full flex-col items-start space-y-4",children:(0,a.jsx)("p",{className:"w-full whitespace-pre-line break-words py-6 text-center text-lg font-medium text-gray-800",children:n("app.limitNoticeDialog.content")})})]}),(0,a.jsx)(r.cN,{children:(0,a.jsx)("div",{className:"flex w-full items-center justify-center gap-4",children:(0,a.jsx)(i(),{href:"/pricing",className:"rounded-md bg-amber-600 px-4 py-2 text-base text-white outline-none transition duration-500 hover:bg-amber-500 focus:outline-none",children:n("app.limitNoticeDialog.btn")})})})]})})})}},75163:function(e,t,s){"use strict";s.d(t,{g:function(){return n}});var a=s(15311),l=s(13048),r=s(20132);function n(e){let{verifyChatLoading:t=!0,success:s}=e,n=(0,r.useRef)(),[i,o]=(0,r.useState)("");return(0,r.useEffect)(()=>{if(t){if("solved"===i){let e=n.current?.getResponse();e?(s(e),o("expired")):n.current?.reset()}else""!==i&&n.current?.reset()}},[t,i]),(0,a.jsx)(l.Nc,{ref:n,siteKey:"0x4AAAAAAAgeJUEUvYlF2CzO",onError:()=>o("error"),onSuccess:()=>o("solved"),onExpire:()=>o("expired"),options:{size:"invisible"}})}},33341:function(e,t,s){"use strict";s.d(t,{OX:function(){return m},Qz:function(){return o},dy:function(){return i},iI:function(){return p},sc:function(){return u},ze:function(){return x}});var a=s(15311),l=s(20132),r=s(45171),n=s(48147);let i=e=>{let{shouldScaleBackground:t=!0,...s}=e;return(0,a.jsx)(r.dy.Root,{shouldScaleBackground:t,...s})};i.displayName="Drawer";let o=r.dy.Trigger,c=r.dy.Portal;r.dy.Close;let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.dy.Overlay,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80",s),...l})});d.displayName=r.dy.Overlay.displayName;let u=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(r.dy.Content,{ref:t,className:(0,n.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",s),...i,children:[(0,a.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),l]})]})});u.displayName="DrawerContent";let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...s})};m.displayName="DrawerHeader";let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("mt-auto flex flex-col gap-2 p-4",t),...s})};x.displayName="DrawerFooter";let p=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.dy.Title,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});p.displayName=r.dy.Title.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.dy.Description,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})}).displayName=r.dy.Description.displayName},25261:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var a=s(15311),l=s(20132),r=s(50336),n=s(43360),i=s(48147);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.f,{ref:t,className:(0,i.cn)(o(),s),...l})});c.displayName=r.f.displayName},51706:function(e,t,s){"use strict";s.d(t,{_v:function(){return d},aJ:function(){return c},pn:function(){return i},u:function(){return o}});var a=s(15311),l=s(20132),r=s(37496),n=s(48147);let i=r.zt,o=r.fC,c=r.xz,d=l.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...i}=e;return(0,a.jsx)(r.VY,{ref:t,sideOffset:l,className:(0,n.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})});d.displayName=r.VY.displayName},79103:function(e,t,s){"use strict";var a=s(15311),l=s(20132),r=s(18227),n=s(73127);let i=e=>{let{wavesurfer:t,audioUrl:s,autoPlay:i=!1,onPlayChange:o=e=>{},onPlayFinish:c=()=>{},loaderColor:d="#F97316",waveColor:u="#dedede",progressColor:m="#F97316",waveHeight:x=50}=e,p=(0,l.useRef)(null),[h,f]=(0,l.useState)(!1);return(0,l.useEffect)(()=>(f(!0),t.current=r.Z.create({container:p.current,waveColor:u,progressColor:m,height:x,hideScrollbar:!0}),(async()=>{try{await t.current.load(s)}catch(e){console.error("音频加载错误：",e)}})(),t.current.on("ready",()=>{f(!1),i&&(t.current.play(),o(!0))}),t.current.on("finish",()=>{o(!1),c()}),t.current.on("play",()=>{o(!0)}),t.current.on("pause",()=>{o(!1)}),()=>{t.current.destroy()}),[s,i,t,u,m,x]),(0,a.jsx)("div",{className:"wave-audio-player flex w-full items-center justify-center gap-8",children:(0,a.jsxs)("div",{className:"waveform w-full",children:[h&&(0,a.jsx)("div",{className:"flex w-full items-center justify-center",style:{height:x},children:(0,a.jsx)(n.Z,{color:d,width:"100%"})}),(0,a.jsx)("div",{ref:p,className:h?"hidden":""})]})})};i.displayName="WaveAudio",t.Z=i},20356:function(e,t,s){"use strict";s.r(t),s.d(t,{GenerateApp:function(){return tN},__N_SSP:function(){return ty},default:function(){return tD},runtime:function(){return tS}});var a=s(15311),l=s(20132),r=s(5724),n=s(6673),i=s.n(n),o=s(17108),c=s(5762),d=s(25733),u=s(20679),m=s(14025),x=s(96367),p=s(47541),h=s(48147);let f=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(p.fC,{className:(0,h.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:t,children:(0,a.jsx)(p.bU,{className:(0,h.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});f.displayName=p.fC.displayName;var g=s(25261),j=s(51706),v=s(66240),w=s(13031),b=s(90782),y=s(20050),N=s(67925),D=s(26512),S=s.n(D),C=s(86955);s(52944);var k=s(41561),Z=s(8398),I=s(14218),_=s(48846),F=s(35862),P=s(75163),R=s(81013),L=s(21576),T=s(39912),M=s(74034),E=s.n(M),O=s(25206);function A(e){let{extendRecordInfo:t,loadRecordList:s,generateLoading:n,setGenerateLoading:i,isExtendDialog:o,setIsExtendDialog:c}=e,{t:u}=(0,r.Z)("common"),m=u("app.styleDescription.list",{},{returnObjects:!0}),[p,h]=(0,l.useState)(""),[v,w]=(0,l.useState)(!1),[b,y]=(0,l.useState)(!1),[D,S]=(0,l.useState)(""),[C,k]=(0,l.useState)(120),[Z,I]=(0,l.useState)(120),[_,F]=(0,l.useState)(2999),P=(0,l.useRef)(null),[R,L]=(0,l.useState)(0),[M,A]=(0,l.useState)("");(0,l.useEffect)(()=>{if(o&&t){let e="Fusion"===t.model?1e3:120;k(e),h("");let s=t?.style||"";S(s),I(e-s.length),F(2999);let a=function(e,t){let[s,a]=e.split(":").map(Number),l=60*s+a-5;return l<0?e:`${String(Math.floor(l/60)).padStart(2,"0")}:${String(l%60).padStart(2,"0")}`}(t?.maxDuration||"00:00",0),[l,r]=a.split(":").map(Number);L(60*l+r),A(a)}},[o,t]);let U=e=>{let t=0;for(let s=0;s<e.length;s++)e.charCodeAt(s)>127?t+=2:t+=1;return t},$=e=>{let t="";(t=0===D.length?e:`${D}, ${e}`).length<=C&&(S(t),I(C-t.length))},z=e=>{let s=t?.maxDuration||"00:00",[a,l]=s.split(":").map(Number),r=60*a+l,n=e.target.value;if(A(n),/^(([01]?[0-9]|2[0-3])(:[0-5][0-9])?)$/.test(n)){let e=0;if(n.includes(":")){let[t,s]=n.split(":").map(Number);e=(isNaN(t)?0:t)*60+(isNaN(s)?0:s)}else e=60*parseInt(n,10)||0;(e=Math.max(0,e))>r?(A(s),L(r)):L(e)}else n.length>5&&(A(s),L(r))},V=async()=>{if(!n){i(!0);try{let e=await (0,N.Z)({url:"/api/v1/suno/extend",method:"post",data:{customFlag:!0,recordId:t.recordId,audioIndex:t.audioIndex,prompt:p,style:D,continueAt:R}});200===e.code?(c(!1),s()):i(!1)}catch(e){i(!1),console.log(e)}}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(T.Vq,{open:o,onOpenChange:c,children:(0,a.jsx)(T.cZ,{className:"w-[90%]",children:(0,a.jsxs)(T.fK,{children:[(0,a.jsx)(T.$N,{className:"flex flex-col items-start gap-2",children:(0,a.jsx)("h2",{children:"Extend"})}),(0,a.jsxs)(T.Be,{className:"dialog_scroll_style flex w-full flex-col items-start",children:[(0,a.jsxs)("div",{className:"dialog_scroll_style mx-auto grid max-h-[400px] w-full grid-cols-1 gap-4 overflow-y-auto py-4 pr-2 lg:max-h-[500px]",children:[(0,a.jsxs)("div",{className:"relative flex h-20 w-full items-center gap-3 overflow-hidden rounded-xl bg-gray-500/5 p-2",children:[(0,a.jsx)("span",{className:"absolute right-0 top-0 inline-flex items-center gap-1 rounded-bl-xl bg-amber-500/10 px-2 py-1 text-xs text-amber-600",children:t?.maxDuration}),(0,a.jsx)("div",{className:"group relative h-16 w-16 cursor-pointer rounded-md transition duration-500",children:(0,a.jsx)(E(),{src:t?.imageUrl||O.Z,alt:"cover",width:100,height:100,unoptimized:!0,className:"h-full w-full object-cover"})}),(0,a.jsxs)("div",{className:"flex w-[80%] flex-1 flex-col items-start",children:[(0,a.jsx)("p",{className:"w-full truncate text-base font-semibold transition duration-500",children:t?.title}),(0,a.jsx)("p",{className:"inline-flex items-center gap-1 text-xs text-gray-400",children:t?.style})]})]}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-between pl-2",children:[(0,a.jsx)("label",{htmlFor:"extendFrom",className:"text-sm font-medium",children:"Extend from"}),(0,a.jsx)("div",{className:"relative inline-flex items-center",children:(0,a.jsx)("input",{id:"extendFrom",name:"extendFrom",type:"text",placeholder:t?.maxDuration,value:M,onChange:e=>{z(e)},className:"block w-28 rounded-md border-none px-2 py-1.5 text-gray-900 outline-none ring-1 ring-inset ring-gray-200 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-amber-600"})})]}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsxs)(g._,{htmlFor:"instrumental",className:"inline-flex items-center gap-1 px-2",children:[u("app.instrumental.label"),(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-4 fill-gray-300"})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:u("app.instrumental.tips")})})]})})]}),(0,a.jsx)(f,{checked:v,onCheckedChange:e=>{w(e),v||h("")},id:"instrumental"})]}),!v&&(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",children:[(0,a.jsxs)(g._,{htmlFor:"Lyrics",className:"inline-flex items-center gap-1 px-2 text-sm",children:[u("app.lyricsDescription.title"),(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-4 fill-gray-300"})}),(0,a.jsx)(j._v,{side:"bottom",className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:u("app.lyricsDescription.hoverTips")})})]})})]}),(0,a.jsxs)("div",{className:"relative w-full rounded-md border border-gray-500/20 bg-white/10 px-2 py-1",children:[(0,a.jsx)("textarea",{ref:P,value:p,onInput:e=>{let t=e.target.value,s=U(t);s<=2999&&(h(t),F(2999-s))},onCompositionStart:()=>y(!0),onCompositionEnd:()=>y(!1),placeholder:u("app.extendDialog.lyricsDes"),disabled:v,className:"disabled:text-gray-1000 h-32 w-full resize-none overflow-y-auto border-none bg-transparent p-1 text-sm outline-none disabled:cursor-not-allowed disabled:ring-gray-200"}),(0,a.jsxs)("div",{className:"w-full text-right text-xs text-gray-400",children:[2999-_,"/",2999]})]})]}),(0,a.jsxs)("div",{className:"relative flex w-full flex-col items-start gap-2",children:[(0,a.jsxs)("label",{htmlFor:"style-of-music",className:"inline-flex items-center gap-1 px-2 text-sm font-medium",children:[u("app.placeholder.styleMusic.label"),(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-4 fill-gray-300"})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:u("app.styleDescription.hoverTips")})})]})})]}),(0,a.jsxs)("div",{className:"relative w-full rounded-md border border-gray-500/20 bg-white/10 px-2 py-1",children:[(0,a.jsx)("textarea",{value:D,onInput:e=>{let t=e.target.value,s=t.length;s<=C&&(S(t),I(C-s))},placeholder:u("app.placeholder.styleMusic.des"),className:"disabled:text-gray-1000 h-24 w-full resize-none overflow-y-auto border-none bg-transparent p-1 text-sm outline-none disabled:cursor-not-allowed disabled:ring-gray-200"}),(0,a.jsxs)("div",{className:"mb-1 w-full text-right text-xs text-gray-400",children:[C-Z,"/",C]}),(0,a.jsx)("div",{className:"max-w-full overflow-x-auto whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex space-x-1 overflow-x-auto pb-1",onWheel:e=>{let t=e.currentTarget;t.scrollLeft+=e.deltaY},children:m.map((e,t)=>(0,a.jsx)("button",{onClick:()=>$(e.title),className:"rounded-full bg-gray-400/10 px-3 py-1.5 font-sans text-xs transition duration-500 hover:bg-amber-500 hover:text-white",children:e.title},t))})})]})]})]}),(0,a.jsx)("div",{className:"w-full p-2",children:(0,a.jsxs)("button",{onClick:V,className:"flex w-full items-center justify-center gap-1 rounded-lg bg-amber-500 p-3 font-medium text-white transition duration-500 hover:bg-amber-600",children:["Extend",(0,a.jsx)(d.Z,{loading:n,color:"#FFFFFF",margin:0,size:5})]})})]})]})})})})}var U=s(17931),$=s(32923),z=s(89083),V=s(94842),B=s(89190);function J(e){let{selectedType:t,setSelectedType:s,setModelToSubscribeDialog:n}=e,{t:i}=(0,r.Z)("common"),{userStore:o}=(0,I.o)(),[c,d]=(0,l.useState)(!1),u=["Fusion"],m=[{name:i("app.musicType.fusion"),content:i("app.musicType.fusionCon"),vipFlag:!0,type:"Fusion"},{name:i("app.musicType.prime"),content:i("app.musicType.primeCon"),vipFlag:!1,type:"Prime"},{name:i("app.musicType.core"),content:i("app.musicType.coreCon"),vipFlag:!1,type:"Core"}],p=(e,t)=>{if(t&&!o?.user?.vipFlag){n(!0),d(!1);return}s(e),localStorage.setItem("selectedType",e),d(!1)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(B.J2,{open:c,onOpenChange:d,children:[(0,a.jsxs)(B.xo,{title:m.find(e=>e.type===t)?.name||"--",className:(0,h.cn)("group inline-flex w-full cursor-pointer items-center justify-between gap-2 rounded-full border bg-neutral-400/5 px-2.5 py-1.5 text-sm transition duration-500 hover:border-orange-500 hover:text-orange-500",u.includes(t)?"border-orange-500 text-orange-500":"border-transparent text-neutral-600"),children:[(0,a.jsx)("p",{className:"w-[80%] truncate text-left",children:m.find(e=>e.type===t)?.name||"--"}),(0,a.jsx)(x.n,{icon:"music_arrow",className:(0,h.cn)("w-3",u.includes(t)?"fill-orange-500":"fill-neutral-600")})]}),(0,a.jsx)(B.yk,{className:"w-60 px-2",children:(0,a.jsx)("ul",{className:"flex w-full flex-col items-start gap-2 text-sm text-neutral-300",children:m.map((e,s)=>(0,a.jsxs)("li",{onClick:()=>p(e.type,e.vipFlag),className:(0,h.cn)("group w-full cursor-pointer rounded-lg p-2 text-sm transition duration-500 hover:bg-neutral-50",t===e.type?"bg-neutral-50 text-orange-500":"bg-transparent text-neutral-800"),children:[(0,a.jsxs)("p",{className:(0,h.cn)("flex w-full items-center gap-2 font-medium transition duration-500 group-hover:text-orange-500",t===e.type?"text-orange-500":"text-neutral-800"),children:[e.name,u.includes(e.type)&&(0,a.jsx)(x.n,{icon:"music_vip",className:"w-4 fill-amber-500"})]}),(0,a.jsx)("p",{className:"mt-1 w-full text-xs text-neutral-500",children:e.content})]},s))})})]})})}var G=s(6381),H=s.n(G);function W(e){let{modelToSubscribeDialog:t,setModelToSubscribeDialog:s}=e,{t:l}=(0,r.Z)("common");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsx)(T.cZ,{children:(0,a.jsxs)(T.fK,{children:[(0,a.jsx)(T.$N,{className:"flex flex-col items-start gap-2 text-neutral-800",children:l("app.modelDialog.title")}),(0,a.jsxs)(T.Be,{className:"flex w-full flex-col items-start space-y-6 text-neutral-800",children:[(0,a.jsx)("div",{className:"w-full whitespace-pre-line break-words py-6 text-center text-base leading-7",children:l("app.modelDialog.content")}),(0,a.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,a.jsx)(H(),{href:"/pricing",className:"inline-flex w-auto items-center justify-center gap-2 rounded-full bg-gradient-to-b from-orange-400 to-orange-600 px-6 py-2.5 text-center text-sm font-semibold text-white outline-none transition duration-500 hover:scale-105",children:l("app.modelDialog.subscription")})})]})]})})})})}var q=s(82839),K=s(34601),Y=s(43133),X=s(39872);function Q(e){let{lyrics:t,isGenerating:s,isEmpty:l,onSelect:n}=e,{t:i}=(0,r.Z)("common");return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl text-[#FF7A45]",children:t.title}),!l&&(0,a.jsxs)("button",{onClick:n,disabled:s,className:"flex min-w-[150px] max-w-[200px] items-center gap-2 rounded-lg bg-[#FF7A45] px-4 py-2 text-sm font-medium text-white transition-all hover:bg-[#ff8c5c] disabled:opacity-50",children:[(0,a.jsx)(X.Z,{className:"h-4 w-4"}),i("lyricsDailog.chooseVersion")]})]}),(0,a.jsx)("div",{className:`h-[300px] rounded-lg border border-[#E5E5E5] bg-white p-4 text-sm shadow-sm ${l?"":"overflow-y-auto"}`,children:l?(0,a.jsx)("div",{className:"flex h-full items-center justify-center text-gray-400",children:i(s?"lyricsDailog.GeneratingLyrics":"lyricsDailog.LyricsAppear")}):(0,a.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-base leading-relaxed tracking-wide text-gray-800",children:t.text})})]})}function ee(e){let{isGenerating:t,generatedLyrics:s,onSelect:l}=e,{t:n}=(0,r.Z)("common"),i=[{title:n("lyricsDailog.versionA"),content:""},{title:n("lyricsDailog.versionB"),content:""}],o=s.length>0?s:i;return(0,a.jsx)("div",{className:"mt-6 grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-6",children:o.map((e,r)=>(0,a.jsx)(Q,{lyrics:e,isGenerating:t,isEmpty:!s.length,onSelect:()=>l(e)},r))})}function et(e){let{openDialog:t,setOpenDialog:s,setAppLyrics:n,setAppTitle:i}=e,[o,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(!1),[m,x]=(0,l.useState)([]),{t:p}=(0,r.Z)("common"),h=e=>{let t=setInterval(()=>{(0,N.Z)({url:`/api/v1/lyrical/getLyricsByUuid/${e}`,method:"get"}).then(e=>{1===e.data.status?(x(e.data.completeData),u(!1),clearTimeout(t)):2===e.data.status&&(v.ZP.error(e.data.failMsg||e.msg),u(!1),clearTimeout(t))}).catch(e=>{console.log(e)})},1500)};return(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsx)(T.cZ,{className:"h-[80%] min-w-[350px] max-w-[60%] overflow-hidden rounded-2xl border border-black/10 bg-white p-0 shadow-lg",children:(0,a.jsxs)("div",{className:"relative overflow-y-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-1 flex items-center justify-center gap-2",children:[(0,a.jsx)(q.Z,{className:"h-5 w-5 text-[#FF7A45]"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#FF7A45]",children:p("lyricsDailog.lyricsTitle")})]}),(0,a.jsx)("p",{className:"mb-6 text-center text-xs text-gray-500",children:p("lyricsDailog.helpPerfect")}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("textarea",{value:o,onChange:e=>c(e.target.value),placeholder:p("lyricsDailog.shareIdea"),className:"min-h-[100px] w-full resize-none rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-[#FF7A45]"}),(0,a.jsx)("button",{onClick:()=>{d||(u(!0),(0,N.Z)({url:"/api/v1/lyrical/create",method:"post",data:{prompt:o}}).then(e=>{200===e.code?(x([]),h(e.data.uuid)):(v.ZP.error(e.msg),u(!1))}).catch(e=>{v.ZP.error(e),u(!1)}))},disabled:d||!o,className:"absolute bottom-3 right-3 flex items-center gap-1.5 rounded-lg bg-[#FF7A45] px-4 py-2 text-sm font-medium text-white transition-all hover:bg-[#ff8c5c] disabled:opacity-50",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K.Z,{className:"h-4 w-4 animate-spin"}),p("lyricsDailog.Generate"),"..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.Z,{className:"h-4 w-4"}),p("lyricsDailog.Generate")]})})]}),(0,a.jsx)(ee,{isGenerating:d,generatedLyrics:m,onSelect:e=>{c(""),n(e.text),i(e.title),s(!1)}})]})})})}var es=s(83734),ea=s(30634),el=s(24013);function er(e){let{onStartOperation:t,t:s}=e,l=[{type:"library",icon:es.Z,tooltip:s("batchOperation.libraryTooltip")},{type:"download",icon:ea.Z,tooltip:s("batchOperation.downloadTooltip")},{type:"delete",icon:el.Z,tooltip:s("batchOperation.deleteTooltip")}];return(0,a.jsx)("div",{className:"flex justify-end gap-1.5 px-4 pt-2",children:l.map(e=>{let{type:s,icon:l,tooltip:r,hoverColor:n}=e;return(0,a.jsxs)("button",{onClick:()=>t(s),className:"group relative rounded-full bg-neutral-400/5 p-2 transition duration-500 hover:bg-neutral-400/10","aria-label":r,children:[(0,a.jsx)(l,{size:18,className:(0,h.cn)("text-neutral-600 transition duration-500","delete"===s?"group-hover:text-rose-600":"group-hover:text-orange-500")}),(0,a.jsx)("span",{className:"absolute -bottom-8 left-1/2 z-10 -translate-x-1/2 whitespace-nowrap rounded border border-neutral-300/15 bg-neutral-50 px-2 py-1 text-xs opacity-0 transition duration-500 group-hover:opacity-100",children:r})]},s)})})}function en(e){let{selectedCount:t,operation:s,onAction:l,onCancel:r,batchLoading:n,t:i}=e,o={delete:{icon:el.Z,text:i("batchOperation.deleteButton"),style:"bg-rose-500/10 text-rose-500 hover:bg-rose-500/20",loadingColor:"#F43F5E"},library:{icon:es.Z,text:i("batchOperation.libraryButton"),style:"bg-[rgba(var(--rgb-primary),0.05)] text-[var(--color-primary)] hover:bg-[rgba(var(--rgb-primary),0.1)]",loadingColor:"var(--color-primary)"},download:{icon:ea.Z,text:i("batchOperation.DownloadButton"),style:"bg-[rgba(var(--rgb-primary),0.05)] text-[var(--color-primary)] hover:bg-[rgba(var(--rgb-primary),0.1)]",loadingColor:"var(--color-primary)"}}[s],c=o.icon;return(0,a.jsxs)("div",{className:"animate-slide-up fixed bottom-36 left-1/2 z-20 flex w-[90%] -translate-x-1/2 items-center justify-between gap-4 rounded-full bg-white/[0.05] px-6 py-2.5 backdrop-blur-md transition duration-500 md:bottom-6 md:w-auto md:-translate-x-1/3 lg:bg-black/[0.05]",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:[t," ",i("batchOperation.songsSelected")]}),(0,a.jsxs)("button",{onClick:l,disabled:0===t||n,className:`flex items-center gap-0.5 rounded-full px-2 py-1.5 text-sm ${o.style} transition duration-500 disabled:cursor-not-allowed disabled:opacity-70`,children:[(0,a.jsx)(c,{size:16}),(0,a.jsx)("span",{children:o.text}),(0,a.jsx)(d.Z,{loading:n,color:o.loadingColor,size:4})]}),(0,a.jsxs)("button",{onClick:r,className:"group inline-flex items-center gap-1 text-xs text-[var(--color-text-contrast)] transition duration-500 hover:text-[var(--color-primary-gold)]",children:[(0,a.jsx)(x.n,{icon:"close",className:"w-2.5 fill-[var(--color-text-contrast)] transition duration-500 group-hover:fill-[var(--color-primary-gold)]"}),(0,a.jsx)("span",{className:"hidden md:inline-block",children:i("batchOperation.CancelButton")})]})]})}var ei=s(87796),eo=s(79103);function ec(e){let{vocalRemovalDialog:t,setVocalRemovalDialog:s,vocalRemovalInfo:n}=e,{t:i}=(0,r.Z)("common"),{userStore:o}=(0,I.o)(),c=(0,l.useRef)(null),d=(0,l.useRef)(null),u=(0,l.useRef)(null),[m,p]=(0,l.useState)(""),[h,f]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[v,w]=(0,l.useState)(""),[b,y]=(0,l.useState)(!1),D=(0,l.useRef)(!0);(0,l.useEffect)(()=>{D.current=t,t?(p(""),f(""),j("generating"),w(""),y(!1)):j("")},[t]),(0,l.useEffect)(()=>{"generating"===g&&S()},[g]);let S=()=>{D.current&&n&&(0,N.Z)({url:`/api/v1/vocal-removal/detail?recordId=${n.record.id}&musicIndex=${n.index}`,method:"get"}).then(e=>{if(200===e.code){if(!e.data){C();return}switch(e.data.status){case"GENERATING":setTimeout(()=>{S()},1500);break;case"SUCCESS":let t=JSON.parse(e.data.fileLink);p(t.vocal_url),f(t.instrumental_url),y(e.data.isPlus),j("success");break;case"FAILED":j("error"),w("")}}else setTimeout(()=>{S()},1500)}).catch(e=>{setTimeout(()=>{S()},1500),console.log("",e)})},C=()=>{t&&n&&(j("generating"),(0,N.Z)({url:"/api/v1/vocal-removal/create",method:"post",data:{recordId:n.record.id,musicIndex:n.index}}).then(e=>{200===e.code?S():(j("error"),w(e.msg))}).catch(e=>{console.log("",e),j("error"),w(e.message||"")}))},k=(e,t)=>{t?e.current.pause():(c.current?.pause(),d.current?.pause(),u.current?.pause(),e.current.play())};return t?(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(T.cZ,{className:"w-[90%] lg:max-w-2xl",children:[(0,a.jsx)(T.fK,{children:(0,a.jsx)(T.$N,{className:"flex flex-col items-start gap-2",children:(0,a.jsxs)("div",{className:"flex w-[80%] items-center gap-2",children:[(0,a.jsx)("div",{className:"max-w-[50%] truncate",children:n.item.title}),!o.user?.vipFlag&&(0,a.jsxs)("div",{className:"inline-flex items-center gap-1 rounded-full bg-neutral-500/5 px-3 py-1 text-xs font-normal text-neutral-400",children:[(0,a.jsx)(x.n,{icon:"music_notice",className:"w-3 fill-amber-500"}),i("app.vocalRemovalDialog.freePreviewTip")]})]})})}),(0,a.jsx)(T.Be,{className:"flex w-full flex-col items-start space-y-4 py-4 outline-none md:px-2",children:(0,a.jsxs)("ul",{className:"flex w-full flex-col items-start gap-4 lg:gap-10",children:[(0,a.jsx)(ed,{title:i("app.vocalRemovalDialog.vocals"),icon:"music_vocals_1",showPreview:!0,user:o.user,audioRef:c,audioUrl:m,audioStatus:g,errorMessage:v,handlePlayPause:k,isPlus:b,createVocalRemoval:C}),(0,a.jsx)(ed,{title:i("app.vocalRemovalDialog.instrumentals"),icon:"music_instrumentals",showPreview:!0,user:o.user,audioRef:d,audioUrl:h,audioStatus:g,errorMessage:v,handlePlayPause:k,isPlus:b,createVocalRemoval:C}),(0,a.jsx)(ed,{title:i("app.vocalRemovalDialog.original"),icon:"music_original",user:o.user,audioRef:u,audioUrl:n.item.audioUrl,audioStatus:"success",handlePlayPause:k})]})})]})}):null}let ed=e=>{let{title:t,icon:s,showPreview:n=!1,user:i,audioRef:o,audioUrl:c,audioStatus:d="success",errorMessage:u,handlePlayPause:m,isPlus:p,createVocalRemoval:h}=e,{t:f}=(0,r.Z)("common"),[g,j]=(0,l.useState)(!1),v=()=>(0,a.jsx)(eo.Z,{wavesurfer:o,audioUrl:c,onPlayChange:e=>j(e),onPlayFinish:()=>j(!1),progressColor:"#F97316",waveHeight:40});return(0,a.jsxs)("li",{className:"flex w-full flex-col items-start gap-1.5",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between px-2",children:[(0,a.jsx)("div",{className:"inline-flex items-center gap-3",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-1 text-base font-semibold text-orange-600",children:[(0,a.jsx)(x.n,{icon:s,className:"w-5 fill-orange-600"}),(0,a.jsx)("p",{className:"max-w-20 truncate md:max-w-none",children:t})]})}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-1 text-xs",children:[(0,a.jsx)(eu,{icon:i?.vipFlag?"music_download":"music_lock",text:f("app.download"),disabled:!i?.vipFlag||!c,onClick:()=>{c&&(0,F.$)(c,t)}}),g?(0,a.jsx)(eu,{icon:"music_pause",text:f("app.vocalRemovalDialog.pause"),variant:c?"primary":"disabled",disabled:!c,onClick:()=>m(o,g)}):(0,a.jsx)(eu,{icon:"music_player",disabled:!c,text:f("app.vocalRemovalDialog.play"),variant:c?"primary":"disabled",onClick:()=>m(o,g)})]})]}),(0,a.jsx)("div",{className:"flex w-full items-center justify-center rounded-lg bg-neutral-500/5 p-4",children:(()=>{switch(d){case"generating":return(0,a.jsxs)("div",{className:"flex w-full items-center justify-center",children:[(0,a.jsx)(ei.Z,{height:12,width:2,color:"#F97316"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-neutral-600",children:f("app.vocalRemovalDialog.loading")})]});case"error":return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"text-sm text-rose-600",children:u||f("app.vocalRemovalDialog.failed")}),(0,a.jsx)("button",{className:"mt-1 rounded-full border border-orange-500 px-4 py-1 text-xs text-orange-500 transition duration-300 hover:bg-orange-500 hover:text-white",onClick:h,children:f("app.vocalRemovalDialog.regenerate")})]});case"success":if(n){if(i?.vipFlag){if(!p)return(0,a.jsxs)("div",{className:"relative flex h-full w-full items-center justify-between",children:[(0,a.jsx)("div",{className:"w-[30%]",children:v()}),(0,a.jsxs)("button",{className:"group inline-flex h-full w-[70%] items-center justify-center gap-0.5 rounded-xl bg-gradient-to-r from-orange-500/5 to-orange-500/15 text-xs text-neutral-600 backdrop-blur-md transition duration-500 hover:text-orange-500",onClick:h,children:[(0,a.jsx)(x.n,{icon:"music_duration",className:"w-3 fill-neutral-600 transition duration-500 group-hover:fill-orange-500"}),f("app.vocalRemovalDialog.regenerate")]})]});return(0,a.jsx)("div",{className:"relative h-full w-full",children:v()})}return(0,a.jsxs)("div",{className:"relative flex h-full w-full items-center justify-between",children:[(0,a.jsx)("div",{className:"w-[30%]",children:v()}),(0,a.jsxs)(H(),{href:"/pricing",className:"group inline-flex h-full w-[70%] items-center justify-center gap-0.5 rounded-xl bg-gradient-to-r from-orange-500/5 to-orange-500/15 text-xs text-neutral-600 backdrop-blur-md transition duration-500 hover:text-orange-500",children:[(0,a.jsx)(x.n,{icon:"music_lock",className:"w-3 fill-neutral-600 transition duration-500 group-hover:fill-orange-500"}),"30s ",f("app.vocalRemovalDialog.preview")]})]})}return(0,a.jsx)("div",{className:"relative h-full w-full",children:v()});default:return null}})()})]})},eu=e=>{let{icon:t,text:s,variant:l="default",disabled:r,onClick:n}=e,i={default:"bg-neutral-500/10 text-neutral-600 hover:text-orange-500 hover:scale-95 group transition duration-500",primary:"bg-gradient-to-b from-orange-500 to-orange-600 text-neutral-100 hover:scale-95 group transition duration-500",disabled:"bg-neutral-500/10 text-neutral-400 cursor-not-allowed"},o=r?i.disabled:i[l];return(0,a.jsxs)("button",{disabled:r,onClick:n,className:`outline-none px-3 py-1.5 rounded-full inline-flex items-center justify-center gap-1 transition duration-500 group ${o}`,children:[(0,a.jsx)(x.n,{icon:t,className:`w-4 ${"primary"===l?"fill-neutral-100":r?"fill-neutral-400":"fill-neutral-600 transition duration-500 group-hover:fill-orange-500"}`}),(0,a.jsx)("span",{className:"hidden lg:inline-block",children:s})]})};var em=s(89722),ex=s(33348),ep=s(77876),eh=s.n(ep),ef=e=>{let{openDialog:t,setOpenDialog:s,user:n,licenseItem:i}=e,{t:o}=(0,r.Z)("common"),[c,d]=(0,l.useState)({name:"",address:"",email:""}),[u,m]=(0,l.useState)(!1),x=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(localStorage.getItem("userLicense")){let e=JSON.parse(localStorage.getItem("userLicense"));d({name:e.name,address:e.address,email:e.email})}else d(e=>({...e,email:n?.email||""}))},[n]);let p=e=>{let{name:t,value:s}=e.target;d(e=>({...e,[t]:s}))},h=async()=>{if(x.current&&!u){m(!0);try{let e={...c};localStorage.setItem("userLicense",JSON.stringify(e));let t=x.current,s=t.style.transform;t.style.transform="none";let a=await eh()(t,{scale:10,useCORS:!0,logging:!1,backgroundColor:"#ffffff"});t.style.transform=s;let l=new ex.ZP({format:"a4",unit:"pt"}),r=l.internal.pageSize.getWidth(),n=a.height*r/a.width;l.addImage(a.toDataURL("image/jpeg",1),"JPEG",0,0,r,n),l.save(`${i?.title}.pdf`)}catch(e){console.error("PDF generation failed:",e)}finally{m(!1)}}};return(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsx)(T.cZ,{className:"h-[75vh] max-h-[600px] w-[90vw] max-w-[800px] rounded-xl border border-gray-200 bg-white p-0 text-gray-800 shadow-lg",children:(0,a.jsxs)("div",{className:"flex min-h-min flex-col-reverse md:flex-row lg:h-[600px]",children:[(0,a.jsxs)("div",{className:"w-full shrink-0 bg-gray-50 p-[20px] md:w-[400px]",children:[(0,a.jsx)("h3",{className:"mb-[10px] text-base font-semibold text-gray-700",children:"PDF Preview"}),(0,a.jsx)("div",{ref:x,className:"aspect-[210/297] w-[350px] overflow-hidden rounded-lg border border-gray-200 bg-white p-[12px] text-black shadow-sm",style:{maxWidth:"400px",margin:"0 auto"},children:(0,a.jsx)("div",{className:"h-full w-[1300px]",children:(0,a.jsxs)("div",{className:"origin-top-left transform text-[24px] leading-tight",style:{transform:"scale(0.25)",transformOrigin:"top left"},children:[(0,a.jsx)("h1",{className:"mb-[50px] border-b border-gray-300 pb-[60px] text-[56px] font-semibold",children:"Proof of License"}),(0,a.jsxs)("div",{className:"mb-[60px] grid grid-cols-3 gap-x-4 border-b border-gray-300 text-[24px]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"mb-[40px] text-[24px] font-bold",children:"CLIENT"}),(0,a.jsx)("div",{className:"min-h-[10px] text-[24px]",children:c.name}),(0,a.jsx)("div",{className:"min-h-[10px] text-[24px]",children:c.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"mb-[40px] text-[24px] font-bold",children:"ADDRESS"}),(0,a.jsx)("div",{className:"min-h-[160px] max-w-[520px] whitespace-pre-line break-words border-gray-300 text-[24px]",children:c.address})]}),(0,a.jsxs)("div",{className:"text-[24px]",children:[(0,a.jsx)("p",{className:"mb-[40px] font-bold",children:"LICENSE ISSUED ON"}),(0,a.jsx)("p",{children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"mb-[80px] text-[24px]",children:[(0,a.jsx)("p",{className:"mb-[40px] text-[24px] font-bold",children:"MUSIC"}),(0,a.jsx)("div",{className:"min-h-[10px] pb-[20px] text-[24px]",children:i?.title||""}),(0,a.jsx)("div",{className:"min-h-[10px] pb-[20px] text-[24px]",children:`https://musichero.ai${decodeURI(i?.recordPath)}`||""})]}),(0,a.jsxs)("div",{className:"mb-[40px] text-[24px]",children:[(0,a.jsx)("p",{className:"mb-[40px] text-[24px] font-bold",children:"COMPOSER"}),(0,a.jsx)("div",{className:"min-h-[20px] pb-[20px] text-[24px]",children:c.name})]}),(0,a.jsxs)("div",{className:"mt-[100px] space-y-2",children:[(0,a.jsx)("p",{className:"mb-[40px] text-[24px] font-bold",children:"LICENCE"}),(0,a.jsxs)("div",{className:"space-y-1 leading-normal",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("span",{className:"whitespace-nowrap text-[24px] font-bold",children:["Subscription Tier:"," "]}),(0,a.jsx)("span",{className:"ml-1 text-[24px]",children:n?.vipLevel==="1"?"Pro":"Ultra"})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("span",{className:"whitespace-nowrap text-[24px] font-bold",children:["Licensed Territory:"," "]}),(0,a.jsx)("span",{className:"ml-1 text-[24px]",children:"Global"})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("span",{className:"whitespace-nowrap text-[24px] font-bold",children:["Permitted Uses:"," "]}),(0,a.jsx)("span",{className:"ml-1 text-[24px]",children:"Video, Music Production, Multimedia, Digital Projects, Games, Podcasts"})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("span",{className:"whitespace-nowrap text-[24px] font-bold",children:["Distribution Channels:"," "]}),(0,a.jsx)("span",{className:"ml-1 text-[24px]",children:"YouTube, TikTok, Instagram, Twitch, Facebook, Spotify, Apple Music, Amazon Music, and others"})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("span",{className:"whitespace-nowrap text-[24px] font-bold",children:["Advertising Use:"," "]}),(0,a.jsx)("span",{className:"ml-1 text-[24px]",children:"Permitted"})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("span",{className:"whitespace-nowrap text-[24px] font-bold",children:["Licensing Terms:"," "]}),(0,a.jsx)("a",{href:"https://musichero.ai/license",className:"ml-1 text-[24px] text-orange-600",children:"https://musichero.ai/license"})]})]})]}),(0,a.jsxs)("div",{className:"mt-[250px] space-y-1 border-b border-gray-300 pb-[20px] text-[24px]",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-[24px] font-bold",children:"corporate name: "}),(0,a.jsx)("span",{children:"InnoLeap AI LLC"})]}),(0,a.jsxs)("div",{className:"pb-[20px] pt-[20px] text-[24px]",children:[(0,a.jsx)("p",{className:"text-[24px] font-bold",children:"Address:"}),(0,a.jsx)("p",{className:"text-[24px]",children:"30 NGould St Ste N"}),(0,a.jsx)("p",{className:"text-[24px]",children:"Sheridan,"}),(0,a.jsx)("p",{className:"text-[24px]",children:"WY"}),(0,a.jsx)("p",{className:"text-[24px]",children:"82801"})]}),(0,a.jsxs)("div",{className:"mt-[80px] text-[24px]",children:[(0,a.jsx)("span",{className:"text-[24px] font-bold",children:"Email: "}),(0,a.jsx)("span",{className:"text-[24px]",children:"support@musichero.ai"})]})]})]})})})]}),(0,a.jsxs)("div",{className:"w-full shrink-0 bg-white p-6 md:w-[400px]",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"mb-1 text-xl font-bold text-gray-800",children:o("vipLicense.title")}),(0,a.jsx)("p",{className:"text-sm text-orange-600",children:o("vipLicense.des")})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:o("vipLicense.nameTitle")}),(0,a.jsx)("input",{name:"name",value:c.name,onChange:p,className:"mt-2 flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-800 shadow-sm transition-colors placeholder:text-gray-400 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:o("vipLicense.namePlaceholder")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:o("vipLicense.addressTitle")}),(0,a.jsx)("textarea",{name:"address",value:c.address,onChange:p,className:"mt-2 flex h-32 w-full resize-none rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-800 shadow-sm transition-colors placeholder:text-gray-400 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:o("vipLicense.addressPlaceholder")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:o("vipLicense.emailTitle")}),(0,a.jsx)("input",{name:"email",type:"email",value:c.email,onChange:p,className:"mt-2 flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-800 shadow-sm transition-colors placeholder:text-gray-400 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:o("vipLicense.emailPlaceholder")})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("button",{onClick:h,disabled:u,className:"mb-3 flex w-full items-center justify-center gap-2 rounded-lg bg-orange-600 py-2.5 font-medium text-white transition duration-200 hover:bg-orange-700 disabled:opacity-50",children:[(0,a.jsx)(em.Z,{className:"h-4 w-4"}),o(u?"vipLicense.generatingButton":"vipLicense.getButton")]})})]})]})})})},eg=e=>{let{openDialog:t,setOpenDialog:s}=e,l=(0,c.useRouter)(),{t:n}=(0,r.Z)("common");return(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsx)(T.cZ,{className:"max-h-[90vh] w-[95%] max-w-[900px] overflow-y-auto rounded-xl border-neutral-100 bg-white p-0 text-neutral-800 md:max-h-[90vh] md:overflow-hidden [&>button]:text-neutral-600",children:(0,a.jsxs)("div",{className:"flex max-h-[90vh] flex-col-reverse justify-around md:flex-row",children:[(0,a.jsx)("div",{className:"flex w-full items-center justify-center bg-neutral-50 p-6 md:w-[45%] md:overflow-y-auto",children:(0,a.jsx)("div",{className:"aspect-[1/1.414] w-full overflow-hidden rounded-lg",children:(0,a.jsx)("img",{src:"/images/licenseFree.png",alt:"Server room",className:"h-full w-full object-contain"})})}),(0,a.jsxs)("div",{className:"w-full p-8 md:h-full md:w-[55%] md:overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-neutral-800",children:n("freeLicense.title")}),(0,a.jsx)("p",{className:"text-sm text-orange-500",children:n("freeLicense.forAnnual")})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:n("freeLicense.description")})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-neutral-600",children:n("freeLicense.benefitsTitle")}),(0,a.jsxs)("div",{className:"space-y-2 rounded-xl bg-orange-500/5 p-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 text-neutral-600",children:[(0,a.jsx)("span",{children:"\uD83C\uDF0D"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:[n("freeLicense.globalUse"),": "]}),(0,a.jsx)("span",{className:"text-neutral-500",children:n("freeLicense.globalUseDesc")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 text-neutral-600",children:[(0,a.jsx)("span",{children:"\uD83C\uDFB5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:[n("freeLicense.versatile"),": "]}),(0,a.jsx)("span",{className:"text-neutral-500",children:n("freeLicense.versatileDesc")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 text-neutral-600",children:[(0,a.jsx)("span",{children:"\uD83D\uDCE2"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:[n("freeLicense.freeDistribution"),": "]}),(0,a.jsx)("span",{className:"text-neutral-500",children:n("freeLicense.freeDistributionDesc")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 text-neutral-600",children:[(0,a.jsx)("span",{children:"\uD83C\uDFC6"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:[n("freeLicense.permanentRights"),": "]}),(0,a.jsx)("span",{className:"text-neutral-500",children:n("freeLicense.permanentRightsDesc")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 text-neutral-600",children:[(0,a.jsx)("span",{children:"\uD83C\uDFA8"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:[n("freeLicense.creativeFreedom"),": "]}),(0,a.jsx)("span",{className:"text-neutral-500",children:n("freeLicense.creativeFreedomDesc")})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 space-y-3",children:[(0,a.jsx)("p",{className:"mt-auto text-xs font-medium text-neutral-400",children:n("freeLicense.upgrade")}),(0,a.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg bg-gradient-to-t from-orange-600 to-orange-400 py-3 font-medium text-neutral-100 outline-none transition duration-500 hover:scale-95",onClick:()=>{l.push("/pricing")},children:[(0,a.jsx)(em.Z,{className:"h-5 w-5"}),n("freeLicense.upgradeNow")]}),(0,a.jsx)("button",{className:"w-full rounded-lg bg-gradient-to-t from-black/10 to-black/5 py-3 text-neutral-500 outline-none transition duration-500 hover:text-neutral-700",onClick:()=>{s(!1)},children:n("freeLicense.later")})]})]})]})})})},ej={src:"/_next/static/media/bg-plate-1.d39ede10.svg",height:134,width:477,blurWidth:0,blurHeight:0},ev=s(75472),ew=s(18865),eb=function(e){let{lyrics:t,audioRef:s}=e,{t:n}=(0,r.Z)("common"),[i,o]=(0,l.useState)(0),[c,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),x=(0,l.useRef)(null),p=(0,l.useRef)(null),h=(e=>{if(!e||0===e.length)return[];let t=[],s=[];for(let a=0;a<e.length;a++){let l=e[a];if(s.push(l),(l.word.endsWith("\n")||a===e.length-1)&&s.length>0){let e={word:s.map(e=>e.word).join("").trim(),startS:s[0].startS,endS:s[s.length-1].endS};t.push(e),s=[]}}return t})(t?.alignedWords||[]),f=h.length>0?h[0].startS:0;(0,l.useEffect)(()=>{if(!s?.current?.audio?.current)return;let e=s.current.audio.current,t=()=>{o(e.currentTime||0)},a=()=>{d(!e.paused)};return e.addEventListener("timeupdate",t),e.addEventListener("play",a),e.addEventListener("pause",a),d(!e.paused),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("play",a),e.removeEventListener("pause",a)}},[s]),(0,l.useEffect)(()=>{let e=()=>{m(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{m(!1)},3e3)};return window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("scroll",e,!0),p.current&&clearTimeout(p.current)}},[]);let g=e=>{if(!s?.current?.audio?.current||void 0===e.startS)return;let t=s.current.audio.current;t.currentTime=e.startS,t.paused&&t.play()},j=(()=>{if(!h.length)return -1;for(let e=0;e<h.length;e++){let t=h[e];if(i>=t.startS&&i<=t.endS)return e}if(h.length>0&&i>h[h.length-1].endS||h.length>0&&i<h[0].startS)return -1;for(let e=0;e<h.length-1&&(!(i>h[e].endS)||!(i<h[e+1].startS));e++);return -1})();(0,l.useEffect)(()=>{if(j>=0&&x.current&&!u&&c){let e=x.current.children[j];e&&e.scrollIntoView({behavior:"smooth",block:"center"})}},[j,u,c]);let v=()=>{if(!c||f<=0)return 0;let e=f-i;if(e<=0)return 0;let t=e/f;return t>.66?3:t>.33?2:1};return h.length?(0,a.jsxs)("div",{className:"w-full",children:[(()=>{if(i<f){let e=v();return(0,a.jsx)("div",{className:"w-full p-4 text-center",children:(0,a.jsx)("div",{className:"flex items-center justify-center space-x-3",children:[...Array(e)].map((e,t)=>(0,a.jsx)("div",{className:"flex h-8 w-8 animate-pulse items-center justify-center rounded-full bg-orange-500 text-white",children:"♪"},t))})})}return null})(),(0,a.jsx)("div",{ref:x,className:"flex w-full flex-col items-center",children:h.map((e,t)=>(0,a.jsx)("div",{className:`mb-4 whitespace-pre-line text-center text-sm transition-colors duration-300 ${j===t?"scale-110 transform font-bold text-orange-500":"text-base text-neutral-400"} cursor-pointer hover:text-orange-400`,onClick:()=>g(e),children:e.word||""},t))})]}):null};function ey(e){let{record:t,item:s,playing:r,audioPlayerRef:n}=e,i=(0,l.useRef)(null);return((0,l.useEffect)(()=>{i.current&&(i.current.scrollTop=0)},[s?.id]),"fail"===t.state)?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative flex h-full w-full flex-col items-center justify-center",children:[(0,a.jsx)(E(),{src:ej,alt:"cover",width:100,height:100,unoptimized:!0,className:"absolute left-0 top-0 z-[-1] h-full w-full object-cover opacity-30 blur-lg"}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-center justify-center",children:[(0,a.jsx)(E(),{src:O.Z,alt:"cover",width:100,height:100,unoptimized:!0,className:"h-auto w-36 rounded-lg object-cover"}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-center justify-center gap-2 px-4 text-orange-600",children:[(0,a.jsx)("p",{className:"font-medium",children:t.failMsg||"Sorry, generation failed for some reason."}),(0,a.jsx)("p",{className:"inline-flex items-center gap-1 text-xs",children:t.createTimestamp?new Date(t.createTimestamp).toLocaleString():t.createTime})]})]})]})}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"relative aspect-square w-full",children:0===s.isExpire?s.imageUrl?(0,a.jsxs)("div",{className:"relative flex h-full w-full flex-col items-center justify-center overflow-hidden px-2 py-6",children:[(0,a.jsx)(E(),{src:"/images/plate/background_1.webp",alt:"cover",width:100,height:100,unoptimized:!0,className:"absolute left-0 top-0 h-full w-full object-cover opacity-70 backdrop-blur-md"}),(0,a.jsxs)("div",{className:(0,h.cn)(["relative flex aspect-square w-full items-center justify-center p-4 lg:p-12",r?"animate-spin-slow":""]),children:[(0,a.jsx)(E(),{src:"/images/plate/cd_bg.svg",alt:"cover",width:100,height:100,unoptimized:!0,className:"absolute left-1/2 top-1/2 aspect-square h-auto w-[80%] -translate-x-1/2 -translate-y-1/2 object-cover lg:h-full lg:w-full"}),(0,a.jsx)(E(),{src:s.imageUrl,alt:"cover",width:100,height:100,unoptimized:!0,className:"relative h-auto w-1/2 rounded-full object-cover lg:w-[90%]"}),!s.audioUrl&&(0,a.jsx)("div",{className:"absolute left-0 top-0 z-[1] flex inline-flex h-full w-full items-center justify-end justify-center gap-2 bg-black/10 backdrop-blur-sm",children:(0,a.jsx)(ev.Z,{size:40,color:"#f0762e"})})]})]}):(0,a.jsx)("div",{className:"h-full w-full p-4",children:(0,a.jsx)(y.O,{className:"aspect-square h-full w-full rounded-lg"})}):(0,a.jsx)(E(),{src:"/images/expires.svg",width:20,height:20,className:"h-full w-full rounded-lg object-cover"})}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2 px-5 py-4",children:[s.title?(0,a.jsx)("div",{className:"flex w-full items-center gap-2 font-medium text-neutral-900",children:(0,a.jsx)("p",{className:"line-clamp-1 max-w-[80%]",children:s.title})}):(0,a.jsx)(y.O,{className:"h-4 w-[120px]"}),s.tags?(0,a.jsx)(ew.Z,{tags:s.tags,showAllTags:!0}):(0,a.jsx)(y.O,{className:"h-4 w-[120px]"}),(0,a.jsx)("p",{className:"inline-flex items-center gap-1 text-xs text-zinc-500",children:s.createTimestamp?new Date(s.createTimestamp).toLocaleString():s.createTime}),s.lyrics&&s.lyrics.alignedWords&&s.lyrics.alignedWords.length>0?(0,a.jsx)("div",{ref:i,className:"mt-2 flex h-[40vh] w-full flex-col items-start gap-4 overflow-y-auto whitespace-pre-line break-all pl-4 pr-4 text-sm text-neutral-400 lg:mt-4 [&::-webkit-scrollbar]:hidden",children:(0,a.jsx)(eb,{lyrics:s.lyrics,audioRef:n})}):(0,a.jsx)("div",{className:"mt-2 flex w-full flex-col items-start gap-4 whitespace-pre-line break-words text-sm text-neutral-400 lg:mt-4",children:s.prompt})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsxs)("div",{className:"relative aspect-square w-full overflow-hidden",children:[(0,a.jsx)(E(),{src:"/images/plate/background_1.webp",alt:"cover",width:100,height:100,unoptimized:!0,className:"absolute left-0 top-0 h-full w-full object-cover opacity-25 backdrop-blur-md"}),(0,a.jsx)(y.O,{className:"aspect-square w-full bg-black/10"})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2 px-5 py-4",children:[(0,a.jsx)(y.O,{className:"h-6 w-full bg-black/10"}),(0,a.jsx)(y.O,{className:"h-6 w-1/2 bg-black/10"}),(0,a.jsx)("p",{className:"inline-flex items-center gap-1 text-xs text-neutral-500",children:t.createTimestamp?new Date(t.createTimestamp).toLocaleString():t.createTime})]})]})})}function eN(e){let{paramData:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"mt-6 flex w-full flex-col items-start gap-2 border-t border-dashed border-gray-200 pt-4 text-xs text-gray-500",children:[t.prompt&&(0,a.jsx)("p",{className:"w-full whitespace-pre-line break-words",children:t.prompt}),t.style&&(0,a.jsxs)("p",{className:"w-full whitespace-pre-line break-words",children:["Style：",t.style]}),t.title&&(0,a.jsxs)("p",{className:"w-full whitespace-pre-line break-words",children:["Title：",t.title]}),t.continueAt&&(0,a.jsxs)("p",{className:"w-full whitespace-pre-line break-words",children:["ContinueAt：",t.continueAt]}),(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:["boolean"==typeof t.customFlag&&(0,a.jsx)("p",{className:"w-auto rounded-md bg-orange-600/5 p-1 text-sky-600",children:"Extend"}),!0===t.customMode&&(0,a.jsx)("p",{className:"w-auto rounded-md bg-orange-600/5 p-1 text-sky-600",children:"Custom Mode"}),!0===t.instrumental&&(0,a.jsx)("p",{className:"w-auto rounded-md bg-orange-500/5 p-1 text-orange-800",children:"Instrumental"})]})]})})}var eD=s(52711),eS=s(17111);let eC=e=>{let{fileType:t,createTimeStamp:s}=e,{t:n}=(0,r.Z)("common"),[i,o]=(0,l.useState)(0),[c,d]=(0,l.useState)(!0),u=(0,l.useRef)(s||Date.now());return((0,l.useEffect)(()=>{let e=()=>{let e=u.current;return Math.min((Date.now()-e)/1e3/120*99,99)};o(e());let t=setInterval(()=>{o(s=>{let a=e();return a>=99?(clearInterval(t),99):a})},200);return()=>{t&&clearInterval(t)}},[]),c)?(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-50 w-80 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-lg",children:(0,a.jsxs)("div",{className:"px-4 py-3",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:n("app.downloadConverting",{fileType:t})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-orange-600",children:[(0,a.jsx)(eD.Z,{className:"h-3.5 w-3.5 animate-spin"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[Math.round(i),"%"]}),i>=99&&(0,a.jsx)("button",{onClick:()=>d(!1),className:"rounded-full bg-neutral-100 p-1",children:(0,a.jsx)(eS.Z,{className:"h-3 w-3 text-neutral-500"})})]})]}),(0,a.jsx)("div",{className:"h-1 overflow-hidden rounded-full bg-gray-100",children:(0,a.jsx)("div",{className:"h-full bg-orange-600 transition-all duration-200",style:{width:`${i}%`}})})]})}):null};function ek(e){let{item:t,index:s,record:n,setOpenPopoverId:i,openPopoverId:o,deleteAudio:c,setShareData:d,collectMusic:u,extend:p,generateLoading:f,handelVocalRemovalDialog:g,downloadFile:v,handleLicenseDialogChange:w,downloadWavFile:b,handleDeleteClick:y,downloadMp4File:N,setEditMusicDetailData:D,reusePrompt:S,handleStemSplitterDialog:C}=e,{t:k}=(0,r.Z)("common"),{userStore:Z}=(0,I.o)(),[_,F]=(0,l.useState)(!1);if(1===t.isExpire||"fail"===n.state)return(0,a.jsx)("li",{onClick:e=>{i(null),e.stopPropagation(),c(n.id,s)},className:"group inline-flex items-center justify-center gap-2 py-1 text-neutral-700 transition duration-300 hover:text-rose-500",children:(0,a.jsx)(x.n,{icon:"music_delete",className:"w-4 fill-neutral-700 transition duration-300 group-hover:fill-rose-500"})});if("success"===n.state){let e=`download-${n.id}-${s}`,l=`more-${n.id}-${s}`;return(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"flex h-full items-center justify-center gap-4",children:["generating"===t.mp4State&&(0,a.jsx)(eC,{fileType:"MP4",createTimeStamp:t.mp4CreateTimeStamp}),"generating"===t.wavStatus&&(0,a.jsx)(eC,{fileType:"WAV"}),(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{onClick:e=>{i(null),e.stopPropagation(),w(t,n)},icon:"music_license",className:"w-4 fill-neutral-700 transition duration-300 hover:fill-orange-500"})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:k("app.tooltip.license")})})]})}),(0,a.jsxs)(B.J2,{open:o===e,onOpenChange:()=>i(o===e?null:e),children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsxs)("div",{onClick:()=>i(e),className:"relative flex w-full cursor-pointer flex-col items-center",children:[(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"music_download",className:"w-5 fill-neutral-500 transition duration-500 hover:fill-orange-500"})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:k("app.download")})})]})}),("generating"===t.wavStatus||"generating"===t.mp4State)&&(0,a.jsxs)("span",{className:"absolute bottom-0 right-0 flex h-2 w-2",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-orange-500 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-orange-500"})]})]})}),(0,a.jsx)(B.yk,{className:"w-auto max-w-52 px-0 py-2",children:(0,a.jsxs)("ul",{className:"flex w-full flex-col items-start text-sm",children:[(0,a.jsx)("li",{onClick:e=>{i(null),e.stopPropagation(),v(t.audioUrl,t.title)},className:"group inline-flex cursor-pointer items-center justify-center px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:k("app.downloadMP3")}),(0,a.jsxs)("li",{onClick:e=>{e.stopPropagation(),"generating"!==t.mp4State&&"success"===n.state&&N(t,n.id,s).then(()=>{i(null)})},className:(0,h.cn)("group inline-flex w-full cursor-pointer items-center justify-between gap-3 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-600"),children:[k("app.downloadMP4"),(0,a.jsx)("div",{className:"inline-flex items-center gap-1",children:"generating"===t.mp4State?(0,a.jsx)(m.Z,{loading:!0,color:"#ed7731",size:14}):"success"===t.mp4State?(0,a.jsx)(x.n,{icon:"music_download_success",className:"w-4 fill-orange-600"}):"fail"===t.mp4State?(0,a.jsx)(x.n,{icon:"music_download_fail",className:"w-4 fill-rose-600"}):null})]}),(0,a.jsxs)("li",{onClick:e=>{e.stopPropagation(),"generating"!==t.wavStatus&&"success"===n.state&&b(t,n.id,s).then(()=>{i(null)})},className:"group inline-flex w-full cursor-pointer items-center justify-between gap-3 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:[k("app.downloadWAV"),(0,a.jsx)("div",{className:"inline-flex items-center gap-1",children:"generating"===t.wavStatus?(0,a.jsx)(m.Z,{loading:!0,color:"#ed7731",size:14}):"success"===t.wavStatus?(0,a.jsx)(x.n,{icon:"music_download_success",className:"w-4 fill-orange-600"}):"fail"===t.wavStatus?(0,a.jsx)(x.n,{icon:"music_download_fail",className:"w-4 fill-rose-600"}):null})]})]})})]}),(0,a.jsx)("ul",{className:"inline-flex items-center justify-center",children:t.collected?(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{asChild:!0,children:(0,a.jsx)("li",{onClick:async e=>{if(!_){i(null),e.stopPropagation();try{F(!0),await u(n.id,s,!1,t)}finally{F(!1)}}},className:(0,h.cn)("group/collect inline-flex items-center justify-center",_?"cursor-not-allowed":"cursor-pointer"),children:_?(0,a.jsx)(m.Z,{loading:!0,color:"#ec8120",size:20}):(0,a.jsx)(x.n,{icon:"music_collect_1",className:"w-5 fill-rose-600 transition duration-500 group-hover/collect:fill-rose-500"})})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:k("app.tooltip.collected")})})]})}):(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{asChild:!0,children:(0,a.jsx)("li",{onClick:async e=>{if(!_){i(null),e.stopPropagation();try{F(!0),await u(n.id,s,!0,t)}finally{F(!1)}}},className:(0,h.cn)("group/collect inline-flex items-center justify-center",_?"cursor-not-allowed":"cursor-pointer"),children:_?(0,a.jsx)(m.Z,{loading:!0,color:"#ec8120",size:20}):(0,a.jsx)(x.n,{icon:"music_collect",className:"w-5 fill-neutral-500 transition duration-500 group-hover/collect:fill-rose-600"})})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:k("app.tooltip.collected")})})]})})}),(0,a.jsx)("ul",{className:"inline-flex items-center justify-center",children:(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{asChild:!0,children:(0,a.jsx)("li",{onClick:e=>{i(null),e.stopPropagation(),d({item:t,itemIndex:s,recordId:n.id,recordPath:n.recordPath})},className:"group/share inline-flex items-center justify-center",children:(0,a.jsx)(x.n,{icon:"music_share",className:"w-5 fill-neutral-500 transition duration-300 group-hover/share:fill-orange-500"})})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:k("app.tooltip.share")})})]})})}),(0,a.jsxs)(B.J2,{open:o===l,onOpenChange:()=>i(o===l?null:l),children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsx)("div",{onClick:()=>i(l),className:"flex w-full flex-col items-center",children:(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"more_operate",className:"w-5 rotate-90 fill-neutral-500 hover:fill-orange-500"})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:k("app.tooltip.operate")})})]})})})}),(0,a.jsx)(B.yk,{className:"w-auto max-w-52 px-0 py-2",children:(0,a.jsxs)("ul",{className:"flex w-full flex-col items-start text-sm",children:[(0,a.jsxs)("li",{onClick:e=>{D({item:t,itemIndex:s,recordId:n.id})},className:"group inline-flex cursor-pointer items-center justify-center gap-2 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:[(0,a.jsx)(x.n,{icon:"music_edit_music",className:"w-4 fill-neutral-700 transition duration-300 group-hover:fill-orange-500"}),k("app.editMusicDetails")]}),(0,a.jsxs)("li",{onClick:e=>{e.stopPropagation(),i(null),S(n)},className:"group inline-flex cursor-pointer items-center justify-center gap-2 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:[(0,a.jsx)(x.n,{icon:"reuse_prompt",className:"w-4 fill-neutral-700 transition duration-300 group-hover:fill-orange-500"}),k("app.reusePrompt")]}),(0,a.jsx)("li",{className:"h-[1px] w-full bg-neutral-500/10"}),(0,a.jsx)("li",{className:"group inline-flex items-center justify-center gap-2 px-3 pb-1 pt-2 text-xs uppercase text-neutral-400",children:k("app.premiumFeatures")}),(0,a.jsx)("li",{onClick:e=>{e.stopPropagation(),i(null),g(n,t,s)},className:"group inline-flex cursor-pointer items-center justify-center gap-2 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(x.n,{icon:"music_vocal",className:"w-4 fill-neutral-700 transition duration-300 group-hover:fill-orange-500"}),k("app.vocalRemoval")]})}),(0,a.jsx)("li",{onClick:e=>{e.stopPropagation(),i(null),C(n,t,s)},className:"group inline-flex cursor-pointer items-center justify-center gap-2 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(x.n,{icon:"stem_splitter",className:"w-4 fill-neutral-700 transition duration-300 group-hover:fill-orange-500"}),k("app.stemSplitter")]})}),(0,a.jsx)("li",{onClick:e=>{i(null),e.stopPropagation(),p(n,t,s)},className:"group inline-flex cursor-pointer items-center justify-between gap-3 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(x.n,{icon:"music_extend",className:"w-4 fill-neutral-700 transition duration-300 group-hover:fill-orange-500"}),k("app.extend"),(0,a.jsx)(m.Z,{loading:f,color:"#333333",size:10})]})}),(0,a.jsx)("li",{onClick:e=>{i(null),e.stopPropagation(),w(t,n)},className:(0,h.cn)("group inline-flex w-full cursor-pointer items-center justify-between gap-3 px-3 py-2 transition duration-300","text-neutral-700 hover:text-orange-500"),children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(x.n,{icon:"music_license",className:(0,h.cn)("w-4 transition duration-300","fill-neutral-700 group-hover:fill-orange-500")}),k("app.license")]})}),(0,a.jsx)("li",{className:"h-[1px] w-full bg-neutral-500/10"}),(0,a.jsxs)("li",{onClick:e=>{e.stopPropagation(),y(n.id,s)},className:"group inline-flex cursor-pointer items-center justify-center gap-2 px-3 py-2 text-rose-600 transition duration-500 hover:text-rose-700",children:[(0,a.jsx)(x.n,{icon:"music_delete",className:"w-4 fill-rose-600 transition duration-300 group-hover:fill-rose-700"}),k("app.delete")]})]})})]})]})}return(0,a.jsx)(ei.Z,{color:"#ef6c26",width:2,height:16})}let eZ=l.forwardRef((e,t)=>{let{className:s,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:(0,h.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});eZ.displayName="Input";var eI=s(4734);let e_=(0,s(43360).j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),eF=l.forwardRef((e,t)=>{let{className:s,variant:l,size:r,asChild:n=!1,...i}=e,o=n?eI.g7:"button";return(0,a.jsx)(o,{className:(0,h.cn)(e_({variant:l,size:r,className:s})),ref:t,...i})});eF.displayName="Button";var eP=e=>{let{open:t,onOpenChange:s,shareData:n,transferToPermanentStorage:i}=e,{t:o}=(0,r.Z)("common"),[c,d]=(0,l.useState)(!1),u="https://musichero.ai"+(`${n?.recordPath||""}`||"/"),m=async e=>{if(e.stopPropagation(),n){d(!0);try{await navigator.clipboard.writeText(u),await i(n.recordId,n.itemIndex,n.recordPath)}catch(e){S()(u)}finally{d(!1)}}},p=(e,t)=>{if(e.preventDefault(),e.stopPropagation(),n){let e=window.screen.width/2-300,s=window.screen.height/2-200,a={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(u)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(u)}`,reddit:`https://www.reddit.com/submit?url=${encodeURIComponent(u)}`,twitter:`https://x.com/intent/post?url=${encodeURIComponent(u)}`};window.open(a[t],"share",`width=600,height=400,left=${e},top=${s},scrollbars=yes`)}};return n?(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(T.cZ,{className:"w-[400px] rounded-xl p-4 shadow-[0_0_5px_rgba(255,255,255,0.1)]",children:[(0,a.jsx)(T.fK,{children:(0,a.jsx)(T.$N,{className:"text-lg font-semibold",children:o("app.share.title")})}),(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"relative mb-8 flex items-center justify-between gap-3",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:(0,a.jsx)(x.n,{icon:"appLink",className:"h-6 w-6 fill-neutral-400"})}),(0,a.jsx)(eZ,{value:u,readOnly:!0,className:"w-full rounded-lg border border-gray-200 bg-gray-50 py-2.5 pl-10 text-sm text-gray-600 outline-none [&:not(:focus-visible)]:focus:border-gray-200 [&:not(:focus-visible)]:focus:ring-0"}),(0,a.jsxs)(eF,{variant:"ghost",className:"items-center gap-1.5 rounded-md border border-gray-200 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50",onClick:m,disabled:c,children:[c?(0,a.jsx)(eD.Z,{className:"mr-1 h-4 w-4 animate-spin"}):null,(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.n,{icon:"copy",className:"h-5 w-5 fill-gray-700"}),o("app.share.copy")]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,a.jsx)("button",{onClick:e=>p(e,"facebook"),className:"rounded-full bg-[#1877F2] p-2 text-white transition-colors hover:bg-[#0C63D4]",children:(0,a.jsx)(x.n,{icon:"facebook",className:"w-4 fill-white object-cover"})}),(0,a.jsx)("button",{onClick:e=>p(e,"linkedin"),className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#0A66C2] p-1 hover:bg-[#084D93]",children:(0,a.jsx)(x.n,{icon:"linkedIn",className:"w-4 fill-white object-cover"})}),(0,a.jsx)("button",{onClick:e=>p(e,"reddit"),className:"rounded-full bg-[#FF4500] p-2 text-white transition-colors hover:bg-[#E03D00]",children:(0,a.jsx)(x.n,{icon:"reddit",className:"w-4 fill-white object-cover"})}),(0,a.jsx)("button",{onClick:e=>p(e,"twitter"),className:"rounded-full bg-black p-2 text-white transition-colors hover:bg-gray-800",children:(0,a.jsx)(eS.Z,{className:"h-4 w-4"})})]})]})]})}):null},eR=s(52032),eL=function(e){let{open:t,onOpenChange:s,onConfirm:n}=e,{t:i}=(0,r.Z)("common"),[o,c]=(0,l.useState)(!1),d=async()=>{c(!0);try{await n()}finally{c(!1)}};return(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsx)(T.cZ,{className:"w-full max-w-md rounded-xl bg-white p-0",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-full bg-red-100 p-3",children:(0,a.jsx)(eR.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:i("app.deleteAudio.title")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:i("app.deleteAudio.content")})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{disabled:o,onClick:()=>s(!1),className:"rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-200 disabled:cursor-not-allowed disabled:opacity-50",children:i("app.deleteAudio.cancelText")}),(0,a.jsxs)("button",{disabled:o,onClick:d,className:"flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 disabled:cursor-not-allowed disabled:opacity-50",children:[o?(0,a.jsx)(eD.Z,{className:"mr-1 h-4 w-4 animate-spin"}):null," ",i("app.deleteAudio.okText")]})]})]})})})},eT=s(36037),eM=e=>{let{tags:t,showAllTags:s}=e,[r,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(0);return(0,l.useEffect)(()=>{if(t){let e=t.split(/[,， ]+/);o(e.length),n(s?e:e.slice(0,3))}else o(0),n([])},[t]),(0,a.jsxs)("p",{className:"flex w-full flex-wrap items-center gap-1 text-xs text-neutral-600",children:[r.map((e,t)=>(0,a.jsx)("span",{className:"rounded-full bg-neutral-500/10 px-2 py-0.5",children:e.length>5?e.slice(0,5)+"...":e},t)),!s&&i>2&&(0,a.jsx)("span",{className:"rounded-full bg-white/5 px-2 py-1",children:"\xb7\xb7\xb7"})]})},eE=s(9183),eO=s(26795),eA=s(86428),eU=s(98526),e$=s(21181),ez=s(36836);let eV={IDLE:"idle",GENERATING:"generating",SUCCESS:"success",ERROR:"error"},eB=(0,_.Pi)(e=>{let{open:t,onOpenChange:s,editMusicDetailData:n,updateRecordListByIds:i}=e,{t:o}=(0,r.Z)("common"),{userStore:d}=(0,I.o)(),u=(0,c.useRouter)(),[m,p]=(0,l.useState)(""),[h,f]=(0,l.useState)(""),[g,j]=(0,l.useState)({}),w=(0,l.useRef)(null),[b,y]=(0,l.useState)(!1),[D,S]=(0,l.useState)(null),[C,k]=(0,l.useState)(eV.IDLE),[Z,_]=(0,l.useState)(null),[F,R]=(0,l.useState)([]),[L,M]=(0,l.useState)(!1),[E,O]=(0,l.useState)(!1),[A,U]=(0,l.useState)(!1),[$,z]=(0,l.useState)(0),[V,B]=(0,l.useState)(0);(0,l.useEffect)(()=>{n&&(k(eV.IDLE),_(n.item.imageUrl),f(""),p(n.item.title),j({fileContent:n.item.imageUrl}),O(!1),J())},[n]);let J=async()=>{try{let e=await (0,N.Z)({url:"/api/v1/flux/getLastGenerate",method:"post",data:{recordId:n.recordId,audioIndex:n.itemIndex}});if(200===e.code&&e.data){k(eV.SUCCESS),R(e.data.picUrlList);return}R([]),k(eV.IDLE)}catch(e){R([]),k(eV.IDLE)}},G=e=>{z(e),w.current&&w.current.cropper&&(w.current.cropper.setCropBoxData({width:e,height:e}),O(!0))},H=async e=>{if(e.length>0){let t=[],s=e[0];if("image/jpeg"===s.type||"image/png"===s.type||"image/jpg"===s.type){if(s.size>10485760){v.ZP.error("Image size must not exceed 10M");return}let e=s.name,a=e.substring(e.lastIndexOf(".")+1,e.length);t.push({fileType:s.type,file:s,fileContent:"",fileName:e,fileSuffix:a});let l=new FileReader;l.readAsDataURL(s),l.onloadend=()=>{t.fileContent=l.result,""==t.fileContent?(j({}),v.ZP.error("Sorry, image upload failed")):(j(t),O(!0)),y(!1)}}else j({}),v.ZP.error("File format not supported!")}else j({}),_(null)},W=async e=>{if(h.trim()){k(eV.GENERATING);try{let t=await (0,N.Z)({url:"/api/v1/flux/create",method:"post",data:{recordId:n.recordId,audioIndex:n.itemIndex,prompt:h},headers:{verify:e||""}});if(100001===t.code){M(!0);return}200===t.code?K(t.data.uuid):k(eV.ERROR)}catch(e){k(eV.ERROR)}}},K=e=>{(0,N.Z)({url:`/api/v1/flux/getDetails/${e}`,method:"get"}).then(t=>{if(t.data?.state==="generating"||t.data?.state==="waitingStart"||!t.data){setTimeout(()=>{K(e)},1500);return}t.data?.state==="success"&&(k(eV.SUCCESS),R(t.data.picUrlList))})},Y=async()=>{U(!0);try{let e;if(E){let t=(0,ez.v9)(D,"newVideoImage.png");e=await (0,ez._R)(t,"userVideoImage",d.user&&d.user.vipFlag?ez.BS:ez.oq)}let t=await (0,N.Z)({url:"/api/v1/suno/updateTitleAndImage",method:"post",data:{recordId:n.recordId,title:m,audioIndex:n.itemIndex,coverUrl:e||g.fileContent}});200===t.code&&(v.ZP.success("success"),i([n.recordId]),s(!1))}finally{U(!1)}},Q=e=>{j({fileContent:e}),_(e),O(!0)};return n?(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(T.cZ,{className:"h-5/6 max-w-4xl rounded-xl lg:h-auto",children:[(0,a.jsx)(T.fK,{children:(0,a.jsx)(T.$N,{className:"text-xl font-semibold",children:o("musicDetailDialog.edit")})}),(0,a.jsxs)("div",{className:"relative grid gap-8 overflow-y-auto overflow-x-hidden border border-y border-x-transparent pb-4 pt-8 text-black lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-6 px-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center space-x-2",children:[(0,a.jsx)("div",{className:"rounded bg-orange-100 p-2",children:(0,a.jsx)(eO.Z,{className:"h-4 w-4 text-orange-500"})}),(0,a.jsx)("span",{className:"font-medium",children:o("musicDetailDialog.basic")})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:o("musicDetailDialog.title")}),(0,a.jsx)(eZ,{value:m,placeholder:o("musicDetailDialog.placeholder.title"),onChange:e=>p(e.target.value),className:"w-full focus-visible:ring focus-visible:ring-orange-500"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"relative w-full",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-1",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:o("musicDetailDialog.coverTitle")}),(0,a.jsxs)("div",{onDrop:e=>{e.preventDefault();let t=e.dataTransfer.files,s=[];for(let e=0;e<t.length;e++){let a=t[e];if("image/jpeg"===a.type||"image/png"===a.type||"image/jpg"===a.type){s.push(a);break}}s.length>0&&j(...s)},onDragOver:e=>{e.preventDefault()},className:"relative mb-2 flex aspect-square w-full flex-col items-center justify-center overflow-hidden rounded-lg border-2 border-dashed",children:[(0,a.jsx)("input",{id:"file-upload-popup",name:"file-upload-popup",type:"file",accept:".png,.jpg",className:"absolute left-0 top-0 h-full w-full cursor-pointer text-[0px] opacity-0",disabled:b,onClick:e=>{e.target.value=null},onChange:e=>H(e.target.files)}),g?.fileContent?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eU.Z,{src:g.fileContent,className:"h-full w-full",autoCropArea:1,aspectRatio:1,guides:!1,crop:()=>{let e=w.current?.cropper;z(e?.cropBoxData?.height||0),S(e.getCroppedCanvas({maxWidth:1024,maxHeight:1024}).toDataURL("image/png"))},cropend:()=>O(!0),viewMode:1,ref:w,ready:()=>{B(w.current?.cropper?.cropBoxData?.maxHeight),z(w.current?.cropper?.cropBoxData?.maxHeight)}}),(0,a.jsx)("span",{onClick:()=>{j({}),_(null)},className:"absolute right-2 top-2 inline-flex h-5 w-5 cursor-pointer items-center justify-center rounded-full bg-white transition duration-500 hover:bg-white",children:(0,a.jsx)(x.n,{icon:"close",className:"w-2.5 fill-red-700"})})]}):(0,a.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-1 text-xs text-neutral-400",children:[(0,a.jsx)(x.n,{icon:"image",className:"w-10 fill-neutral-400"}),(0,a.jsxs)("p",{className:"flex w-full flex-col items-center justify-center gap-1 whitespace-pre-line break-words p-2 text-center",children:[o("musicDetailDialog.placeholder.image"),(0,a.jsx)("span",{className:"px-2 text-xs text-neutral-400",children:o("musicDetailDialog.placeholder.supportedFormats")})]}),(0,a.jsx)(e$.Z,{loading:b,color:"#006bbd",size:60,className:"!absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"})]})]})]})}),(0,a.jsxs)("div",{className:"flex w-36 items-center gap-2 rounded-full bg-orange-100 px-3 py-1.5 shadow-md",children:[(0,a.jsx)(eA.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("input",{type:"range",min:V/2,max:V,value:$,onChange:e=>{G(Number(e.target.value))},className:"w-24 accent-orange-500"})]})]})]})]}),d?.user?.vipFlag?(0,a.jsxs)("div",{className:"min-h-40 space-y-6 px-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center space-x-2",children:[(0,a.jsx)("div",{className:"rounded bg-orange-100 p-2",children:(0,a.jsx)(q.Z,{className:"h-4 w-4 text-orange-500"})}),(0,a.jsx)("span",{className:"font-medium",children:o("musicDetailDialog.aiTitle")})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("textarea",{placeholder:o("musicDetailDialog.placeholder.ai"),value:h,onChange:e=>f(e.target.value),className:"h-9 w-full resize-none overflow-hidden rounded border p-1 text-sm transition-all placeholder:text-neutral-500 focus:h-20 focus:outline-none focus:ring focus:ring-orange-500"}),(0,a.jsxs)(eF,{onClick:()=>W(""),disabled:"generating"===C||!h||!d.user.vipFlag,className:"ml-2 bg-orange-500 text-white hover:bg-orange-600",children:["generating"===C?(0,a.jsx)(eD.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(q.Z,{className:"mr-2 h-4 w-4"}),o("musicDetailDialog.generate")]})]}),(()=>{switch(C){case eV.GENERATING:return(0,a.jsx)("div",{className:"flex h-16 items-center justify-center rounded-lg bg-[#eff6ff]",children:(0,a.jsxs)("div",{className:"flex items-center px-4",children:[(0,a.jsx)(eD.Z,{className:"h-8 w-8 animate-spin text-orange-500"}),(0,a.jsx)("p",{className:"ml-2 text-sm text-gray-500",children:o("musicDetailDialog.state.generating")})]})});case eV.SUCCESS:return(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:F.map((e,t)=>(0,a.jsxs)("div",{className:"group relative aspect-square cursor-pointer",onClick:()=>Q(e),children:[(0,a.jsx)("img",{src:e,alt:`Generated cover ${t+1}`,className:"h-full w-full rounded-lg object-cover"}),Z===e&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"rounded-full bg-orange-500 p-2",children:(0,a.jsx)(X.Z,{className:"h-6 w-6 text-white"})})}),(0,a.jsx)("div",{className:`absolute inset-0 flex items-center justify-center bg-black/30 backdrop-blur-[2px] transition-opacity duration-200 ${Z===e?"opacity-100":"opacity-0 group-hover:opacity-100"} `,children:(0,a.jsx)("div",{className:`transform rounded-full bg-white/90 p-2 transition-transform duration-200 ${Z===e?"scale-100":"scale-0 group-hover:scale-100"} `,children:(0,a.jsx)(X.Z,{className:"h-5 w-5 text-orange-500"})})})]},t))})});case eV.ERROR:return(0,a.jsx)("div",{className:"flex h-16 items-center justify-center rounded-lg border-red-200 bg-red-50",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eE.Z,{className:"h-8 w-8 text-red-500"}),(0,a.jsx)("p",{className:"ml-2 text-sm text-red-500",children:o("musicDetailDialog.state.error")})]})});default:return null}})()]})]}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -top-3 left-4",children:(0,a.jsx)("span",{className:"rounded-full bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-800",children:o("musicDetailDialog.aiCoverGenerator.tag")})}),(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200/60 bg-gradient-to-br from-gray-50 to-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center gap-2.5",children:[(0,a.jsx)("div",{className:"rounded-lg bg-yellow-50 p-2",children:(0,a.jsx)(q.Z,{className:"h-5 w-5 text-yellow-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:o("musicDetailDialog.aiTitle")})]}),(0,a.jsx)("p",{className:"mb-4 text-sm leading-relaxed text-gray-600",children:o("musicDetailDialog.aiCoverGenerator.tips")}),(0,a.jsx)("button",{onClick:()=>u.push("/pricing"),className:"w-full rounded-lg bg-gradient-to-r from-orange-500 to-orange-500 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:from-orange-600 hover:to-orange-600 hover:shadow",children:o("musicDetailDialog.aiCoverGenerator.upgrade")})]})]}),(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 w-px -translate-x-1/2 -translate-y-1/2 bg-gray-300 lg:h-5/6"})]}),(0,a.jsxs)("div",{className:"mt-2 flex justify-end space-x-4 text-black",children:[(0,a.jsx)(eF,{variant:"outline",onClick:()=>s(!1),children:o("musicDetailDialog.cancel")}),(0,a.jsxs)(eF,{onClick:Y,disabled:A,className:"bg-orange-500 text-white hover:bg-orange-600",children:[A&&(0,a.jsx)(eD.Z,{className:"mr-2 h-4 w-4 animate-spin"}),o("musicDetailDialog.save")]})]}),(0,a.jsx)(P.g,{verifyChatLoading:L,success:e=>{e&&(M(!1),W(e))}})]})}):null});function eJ(e){let{record:t,selectRecordSuno:s,selectRecordItem:n,playing:i,downloadFile:o,downloadWavFile:d,extend:u,generateLoading:p,deleteAudio:f,collectMusic:g,setShareData:j,batchOperation:w,handleSelectItemChange:b,selectedItemList:D,handelVocalRemovalDialog:C,shareData:k,handleLicenseDialogChange:Z,downloadMp4File:_,updateRecordListByIds:F,reusePrompt:P,handleStemSplitterDialog:R}=e,{t:L}=(0,r.Z)("common"),T=(0,c.useRouter)(),{userStore:M}=(0,I.o)(),[O,A]=(0,l.useState)(null),[U,$]=(0,l.useState)(!1),[z,V]=(0,l.useState)(null),[B,J]=(0,l.useState)(!1),G=(e,t)=>{A(null),V({recordId:e,index:t})},H=async()=>{z&&(await f(z.recordId,z.index),V(null))},W=(e,t)=>D?.some(s=>s.recordId===e&&s.index===t),q=async(e,t,s)=>{if(!U){$(!0);try{let a=await (0,N.Z)({url:"/api/v1/suno/transferToPermanentStorage",method:"post",data:{recordId:e,audioIndex:t}});200===a.code?(K(s),$(!1)):v.ZP.error(L("app.sharingFailed")),$(!1)}catch(e){$(!1)}}},K=e=>{let t=T.locale,s=location.origin+("en"===t?"":`/${t}`)+e;S()(s),v.ZP.success(L("app.copiedSuccessfully"))};return"fail"===t.state?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{onClick:()=>s(t,null,0,!0),className:(0,h.cn)("group relative flex w-full cursor-pointer items-start justify-between gap-2 rounded-lg p-2 transition duration-500 hover:bg-white/5 md:items-center"),children:[w&&(0,a.jsx)("div",{className:"mt-2 flex h-5 w-5 items-center md:mt-0"}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-end justify-between md:flex-row md:items-center",children:[(0,a.jsxs)("div",{className:"mb-3 flex w-full items-center gap-4 md:mb-0 md:w-[76%]",children:[(0,a.jsx)("div",{className:"group relative h-16 w-16 cursor-pointer overflow-hidden rounded-md bg-black/10 transition duration-500",children:(0,a.jsx)(E(),{src:"/images/music_failed.svg",width:20,height:20,className:"h-full w-full rounded-lg object-cover",alt:"music_failed"})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,a.jsx)("div",{className:"flex w-full items-center gap-1",children:(0,a.jsx)("div",{title:t.paramData?.title||t.paramData?.prompt,className:(0,h.cn)("line-clamp-1 max-w-[70%] text-sm font-semibold text-neutral-200 group-hover:text-orange-500","transition duration-500",`${t.id}-0`===n?.recordItemId?"text-rose-700":"text-neutral-800"),children:t.paramData?.title||t.paramData?.prompt})}),(0,a.jsx)("p",{className:"line-clamp-1 w-full text-xs text-rose-600",children:t.failMsg||"Sorry, generation failed for some reason."}),(0,a.jsx)("p",{className:"inline-flex items-center gap-1 text-xs text-zinc-500",children:t.createTimestamp?new Date(t.createTimestamp).toLocaleString():t.createTime})]})]}),(0,a.jsx)(ek,{item:{},index:null,record:t,setOpenPopoverId:A,openPopoverId:O,deleteAudio:f,setShareData:j,collectMusic:g,extend:u,generateLoading:p,handelVocalRemovalDialog:C,downloadFile:o,handleLicenseDialogChange:Z,downloadMp4File:_,downloadWavFile:d,handleDeleteClick:G,reusePrompt:P,handleStemSplitterDialog:R})]})]})}):t.sunoData&&t.sunoData.sunoData&&t.sunoData.sunoData.length>0?(0,a.jsxs)(a.Fragment,{children:[t.sunoData.sunoData.map((e,l)=>(0,a.jsx)(a.Fragment,{children:!e.deleteFlag&&(0,a.jsxs)("div",{onClick:()=>s(t,e,l,!0),className:(0,h.cn)("group relative flex w-full cursor-pointer items-start justify-between gap-2 rounded-lg p-2 transition duration-500 hover:bg-orange-600/5 md:items-center",`${t.id}-${l}`===n?.recordItemId?"bg-orange-600/5":""),children:[w&&(0,a.jsx)("div",{className:"mt-2 flex h-full items-center md:mt-0",onClick:s=>{s.stopPropagation(),b(t.id,l,e.isExpire,e.audioUrl,e.title)},children:(0,a.jsx)("div",{className:(0,h.cn)("flex h-5 w-5 items-center justify-center rounded-full border transition-all",W(t.id,l)?"border-orange-500 bg-orange-500":"border-gray-500 group-hover:border-gray-400"),children:W(t.id,l)&&(0,a.jsx)(x.n,{icon:"correct",className:"w-3 fill-neutral-100"})})}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-end justify-between md:flex-row md:items-center",children:[(0,a.jsxs)("div",{className:"mb-3 flex w-full items-center gap-4 md:mb-0 md:w-[76%]",children:[(0,a.jsxs)("div",{className:"group relative h-16 w-16 cursor-pointer overflow-hidden rounded-md transition duration-500",children:[0===e.isExpire?e.imageUrl?(0,a.jsxs)("div",{className:"relative h-16 w-16 rounded-md",children:[(0,a.jsx)(E(),{src:e.imageUrl,alt:"cover",width:100,height:100,unoptimized:!0,className:"h-full w-full rounded-md object-cover"}),!e.audioUrl&&(0,a.jsx)("div",{className:"absolute left-0 top-0 flex inline-flex h-full w-full items-center justify-end justify-center gap-2 bg-black/10 backdrop-blur-sm",children:(0,a.jsx)(ev.Z,{size:24,color:"#ee6b26"})})]}):(0,a.jsx)(y.O,{className:"h-16 w-16 rounded-md bg-black/10"}):(0,a.jsx)(E(),{src:"/images/expires.svg",width:20,height:20,className:"h-full w-full rounded-lg object-cover"}),0===e.isExpire&&e.audioUrl&&(0,a.jsx)("div",{className:(0,h.cn)("h-full w-full rounded-md bg-black/50","absolute left-0 top-0 inline-flex items-center justify-center transition duration-500",`${t.id}-${l}`===n?.recordItemId?"":"opacity-0 group-hover:opacity-100"),children:`${t.id}-${l}`===n?.recordItemId&&i?(0,a.jsx)(x.n,{icon:"pause",className:"w-6 fill-orange-500"}):(0,a.jsx)(x.n,{icon:"player",className:"w-6 fill-orange-500"})})]}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-1",children:[e.title?(0,a.jsx)("div",{title:e.title,className:(0,h.cn)("line-clamp-1 max-w-[70%] text-sm font-semibold text-neutral-200 group-hover:text-orange-500","transition duration-500",`${t.id}-${l}`===n?.recordItemId?"text-orange-500":"text-neutral-800"),children:e.title}):(0,a.jsx)(y.O,{className:"h-4 w-full bg-white/20"}),e.duration&&1!==e.isExpire&&(0,a.jsxs)("p",{className:"inline-flex items-center gap-1 rounded-full bg-neutral-400/10 px-2 py-0.5 text-xs text-neutral-600",children:[(0,a.jsx)(x.n,{icon:"music_duration",className:"w-3 fill-neutral-600"}),(0,eT.QO)(e.duration)]}),1===e.isExpire&&(0,a.jsx)("p",{className:"rounded-full bg-yellow-300 px-2 py-0.5 text-xs text-neutral-700",children:L("app.expired")})]}),e.tags?(0,a.jsx)(eM,{tags:e.tags}):(0,a.jsx)(y.O,{className:"h-4 w-[120px] bg-neutral-500/10"}),e.createTimestamp?(0,a.jsx)("p",{className:"inline-flex items-center gap-1 text-xs text-neutral-500",children:new Date(e.createTimestamp).toLocaleString()}):(0,a.jsx)("p",{className:"inline-flex items-center gap-1 text-xs text-neutral-500",children:e.createTime}),0===e.isExpire&&!e.audioUrl&&(0,a.jsx)(m.Z,{loading:!0,color:"#f1712a",size:12})]})]}),(0,a.jsx)(ek,{item:e,index:l,record:t,setOpenPopoverId:A,openPopoverId:O,deleteAudio:f,setShareData:j,collectMusic:g,extend:u,generateLoading:p,handelVocalRemovalDialog:C,downloadFile:o,handleLicenseDialogChange:Z,downloadMp4File:_,downloadWavFile:d,setEditMusicDetailData:J,handleDeleteClick:G,reusePrompt:P,handleStemSplitterDialog:R})]})]},l)})),(0,a.jsx)(eP,{open:!!k,onOpenChange:()=>j(null),shareData:k,transferToPermanentStorage:q}),(0,a.jsx)(eB,{open:!!B,onOpenChange:()=>J(null),setEditMusicDetailData:J,editMusicDetailData:B,updateRecordListByIds:F}),(0,a.jsx)(eL,{open:!!z,onOpenChange:e=>!e&&V(null),onConfirm:H})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{onClick:()=>s(t,null,0,!0),className:(0,h.cn)("group relative flex w-full cursor-pointer items-start justify-between gap-2 rounded-lg p-2 transition duration-500 hover:bg-white/5 md:items-center",`${t.id}-0`===n?.recordItemId?"bg-black/10":""),children:[w&&(0,a.jsx)("div",{className:"mt-2 flex h-5 h-full w-5 items-center md:mt-0"}),(0,a.jsx)("div",{className:"flex w-full flex-col items-end justify-between md:flex-row md:items-center",children:(0,a.jsxs)("div",{className:"mb-3 flex w-full items-center gap-4 md:mb-0 md:w-[76%]",children:[(0,a.jsx)("div",{className:"group relative h-16 w-16 cursor-pointer overflow-hidden rounded-md bg-black/10 transition duration-500",children:(0,a.jsx)(y.O,{className:"h-16 w-16 rounded-md bg-black/10"})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,a.jsx)("div",{className:"flex w-full items-center gap-1",children:(0,a.jsx)("div",{title:t.paramData?.title||t.paramData?.prompt,className:"line-clamp-1 max-w-[70%] text-sm font-semibold text-neutral-700 transition duration-500 group-hover:text-orange-500",children:t.paramData?.title||t.paramData?.prompt})}),(0,a.jsx)(y.O,{className:"h-4 w-[120px]"}),(0,a.jsxs)("p",{className:"inline-flex items-center gap-1 text-xs text-zinc-500",children:[(0,a.jsx)(ev.Z,{loading:!0,color:"#ee6b26",size:20}),t.createTimestamp?new Date(t.createTimestamp).toLocaleString():t.createTime]})]})]})})]})})}var eG=s(298),eH=s(27276),eW=s(56157);function eq(e){let{className:t,classNames:s,showOutsideDays:l=!0,...r}=e;return(0,a.jsx)(eH._W,{showOutsideDays:l,className:(0,h.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,h.cn)(e_({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,h.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===r.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,h.cn)(e_({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{className:t,...s}=e;return(0,a.jsx)(eW.wyc,{className:(0,h.cn)("h-4 w-4",t),...s})},IconRight:e=>{let{className:t,...s}=e;return(0,a.jsx)(eW.XCv,{className:(0,h.cn)("h-4 w-4",t),...s})}},...r})}eq.displayName="Calendar";var eK=s(63222),eY=s(28324);let eX=[{key:"today",days:0,translationKey:"app.searchDate.today"},{key:"last7Days",days:7,translationKey:"app.searchDate.last7Days"},{key:"last30Days",days:30,translationKey:"app.searchDate.last30Days"},{key:"last3Months",days:90,translationKey:"app.searchDate.last3Months"}];function eQ(e){let{loading:t,searchContent:s,onSearchChange:n,onSearch:i,placeholder:o,onDateRangeChange:c}=e,{t:d}=(0,r.Z)("common"),[u,m]=(0,l.useState)(!1),[p,f]=(0,l.useState)(!1),[g,j]=(0,l.useState)(null),[v,w]=(0,l.useState)(!1),[b,y]=(0,l.useState)({from:void 0,to:void 0}),[N,D]=(0,l.useState)({from:void 0,to:void 0}),[S,C]=(0,l.useState)(!1);(0,l.useEffect)(()=>{u&&b.from&&b.to&&!g&&f(!0)},[u,b,g]);let k=(e,t)=>{let s=new Date,a=new Date;a.setDate(a.getDate()-e),D({from:a,to:s}),j(t),Z({from:a,to:s}),m(!1)},Z=e=>{e?.from&&e?.to&&(e.from.setHours(0,0,0,0),e.to.setHours(23,59,59,999),y(e),c?.(e),p&&j(null),m(!1))},I=e=>{let{days:t,translationKey:s,presetKey:l}=e,r=g===l;return(0,a.jsxs)("li",{className:(0,h.cn)("w-full cursor-pointer px-3 py-2 transition duration-500 hover:bg-neutral-100","group flex items-center justify-between",r?"bg-neutral-50":""),onClick:()=>k(t,l),children:[(0,a.jsx)("span",{className:r?"font-medium text-orange-500":"text-neutral-700",children:d(s)}),r&&(0,a.jsx)(x.n,{icon:"music_correct",className:"w-4 fill-orange-500"})]})};return(0,a.jsxs)("div",{className:"inline-flex w-[70%] items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex w-[70%] items-center justify-between overflow-hidden rounded-full bg-neutral-500/5 px-3 text-sm text-neutral-700 lg:w-60",children:[t?(0,a.jsx)(eG.Z,{color:"#ee6b26",size:15}):(0,a.jsx)(x.n,{icon:"music_search",className:"w-5 fill-orange-500"}),(0,a.jsx)("input",{type:"text",placeholder:o,value:s,onCompositionStart:()=>w(!0),onCompositionEnd:()=>w(!1),onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"!==e.key||v||i()},className:"w-[90%] border-none bg-transparent p-2 outline-none placeholder:text-neutral-300"})]}),(0,a.jsxs)(B.J2,{open:u,onOpenChange:m,children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsx)("div",{className:"group relative flex cursor-pointer items-center justify-center rounded-full bg-neutral-500/5 p-2",children:(0,a.jsx)(x.n,{icon:"music_date",className:(0,h.cn)("w-5 transition duration-500",b.from?"fill-orange-700":"lucide lucide-library-big text-neutral-600 transition duration-500 group-hover:text-orange-500")})})}),(0,a.jsxs)(B.yk,{className:"min-w-52 overflow-hidden p-0",children:[(b.from||b.to)&&(0,a.jsx)("div",{className:"border-b border-neutral-100 p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-xs text-neutral-500",children:[b.from&&(0,eK.WU)(b.from,"yyyy/MM/dd"),b.to&&` - ${(0,eK.WU)(b.to,"yyyy/MM/dd")}`]}),(0,a.jsx)("button",{onClick:()=>{y({from:void 0,to:void 0}),D({from:void 0,to:void 0}),j(null),c?.(null),m(!1)},className:"rounded-full p-1 hover:bg-neutral-100",children:(0,a.jsx)(eS.Z,{className:"h-3 w-3 text-neutral-500"})})]})}),p?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("button",{className:"inline-flex items-center gap-1 text-xs text-neutral-500 transition duration-500 hover:text-neutral-700",onClick:()=>{f(!1),D(b)},children:[(0,a.jsx)(x.n,{icon:"music_arrow",className:"w-3 rotate-90 fill-neutral-400"}),d("app.searchDate.back")]})}),(0,a.jsxs)(B.J2,{open:S,onOpenChange:C,children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsxs)(eF,{id:"date",variant:"outline",className:(0,h.cn)("flex w-64 items-start justify-start gap-2 text-left font-normal",!b&&"text-neutral-700"),children:[(0,a.jsx)(eY.Z,{className:"-mt-0.5 w-4 text-neutral-500"}),N?.from?N.to?`${(0,eK.WU)(N.from,"yyyy/MM/dd")} - ${(0,eK.WU)(N.to,"yyyy/MM/dd")}`:(0,eK.WU)(N.from,"yyyy/MM/dd"):(0,a.jsx)("span",{className:"text-neutral-400",children:d("app.searchDate.pickDate")})]})}),(0,a.jsx)(B.yk,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(eq,{initialFocus:!0,mode:"range",defaultMonth:N?.from,selected:N,onSelect:D,numberOfMonths:2,className:"rounded-md border"})})]}),(0,a.jsx)("button",{className:"w-full rounded-md bg-orange-600 px-3 py-2 text-sm text-neutral-50 transition duration-500 hover:bg-orange-500 disabled:cursor-not-allowed disabled:opacity-50",disabled:!N?.from||!N?.to,onClick:()=>Z(N),children:d("app.searchDate.applyRange")})]})}):(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("ul",{className:"flex w-full flex-col items-start text-sm",children:eX.map(e=>(0,a.jsx)(I,{days:e.days,translationKey:e.translationKey,presetKey:e.key},e.key))}),(0,a.jsxs)("div",{className:"mt-2 flex cursor-pointer items-center justify-between border-t border-neutral-100 px-3 py-2 text-sm text-neutral-700 transition duration-500 hover:text-orange-500",onClick:()=>{j(null),f(!0)},children:[d("app.searchDate.customRange"),(0,a.jsx)(x.n,{icon:"music_arrow",className:"w-3 -rotate-90 fill-neutral-400"})]})]})]})]})]})}var e0=s(74807),e1=s(43276),e2=s(88814),e5=s(34869),e3=s(5553),e4=s(46120),e6=s(64280),e7=s(42663);function e9(e){let{privateDialog:t,setPrivateDialog:s}=e,{t:l}=(0,r.Z)("common"),n=(0,c.useRouter)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(T.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(T.cZ,{children:[(0,a.jsx)(T.fK,{children:(0,a.jsxs)(T.$N,{className:"flex items-center gap-2 text-2xl text-neutral-800",children:[(0,a.jsx)(e0.Z,{className:"h-6 w-6 text-orange-500"}),l("privateDialog.title")]})}),(0,a.jsx)("div",{className:"rounded-lg border border-purple-200 bg-purple-50 p-4 dark:border-purple-800 dark:bg-purple-950/30",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(e1.Z,{className:"h-10 w-10 shrink-0 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-neutral-800",children:l("privateDialog.describeTitle")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:l("privateDialog.describe")})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg p-2 hover:bg-muted/50",children:[(0,a.jsx)(e2.Z,{className:"mt-0.5 h-5 w-5 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-neutral-800",children:l("privateDialog.enhanced")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:l("privateDialog.enhancedDescribe")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg p-2 hover:bg-muted/50",children:[(0,a.jsx)(e5.Z,{className:"mt-0.5 h-5 w-5 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-neutral-800",children:l("privateDialog.vocal")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:l("privateDialog.vocalDescribe")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg p-2 hover:bg-muted/50",children:[(0,a.jsx)(e3.Z,{className:"mt-0.5 h-5 w-5 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-neutral-800",children:l("privateDialog.extended")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:l("privateDialog.extendedDescribe")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg p-2 hover:bg-muted/50",children:[(0,a.jsx)(e4.Z,{className:"mt-0.5 h-5 w-5 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-neutral-800",children:l("privateDialog.more")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:l("privateDialog.moreDescribe")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg p-2 hover:bg-muted/50",children:[(0,a.jsx)(e6.Z,{className:"mt-0.5 h-5 w-5 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-neutral-800",children:l("privateDialog.pdf")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:l("privateDialog.pdfDescribe")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg p-2 hover:bg-muted/50",children:[(0,a.jsx)(e7.Z,{className:"mt-0.5 h-5 w-5 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-neutral-800",children:l("privateDialog.andMore")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:l("privateDialog.andMoreDescribe")})]})]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-row-reverse gap-5",children:[(0,a.jsx)(eF,{onClick:()=>n.push("/pricing"),className:"w-full bg-orange-600 hover:bg-orange-700 sm:w-auto",children:l("privateDialog.confirm")}),(0,a.jsx)(eF,{variant:"outline",onClick:()=>s(!1),className:"w-full text-neutral-800 sm:w-auto",children:l("privateDialog.cancel")})]})]})})})}var e8=s(33341),te=s(21164);let tt=[{name:"Very Slow",info:"e.g., 40-60 BPM"},{name:"Slow",info:"e.g., 60-80 BPM"},{name:"Moderate",info:"e.g., 80-100 BPM"},{name:"Medium",info:"e.g., 100-120 BPM"},{name:"Upbeat",info:"e.g., 120-140 BPM"},{name:"Fast",info:"e.g., 140-160 BPM"},{name:"Very Fast",info:"e.g., 160-180 BPM"},{name:"Hyper",info:"e.g., 180+ BPM"},{name:"Laid-Back",info:""},{name:"Groovy",info:""},{name:"Driving",info:""},{name:"Frantic",info:""},{name:"Steady",info:""},{name:"Swinging",info:""},{name:"Pulsing",info:""},{name:"Erratic",info:""}],ts={random:{label:"Random Style",styles:[]},genre:{label:"Genre",styles:["Hip Hop","Jazz","Rock","Indie Pop","Classical","EDM","Country","Blues","Pop","Reggae","Techno","R&B","Metal","Traditional Folk","Ambient","K-Pop","Latin","Salsa","Lo-Fi","Bluegrass","Punk Rock","Soul","Afrobeats","House","Neo Folk","Chillout","Trap","Classic Rock","World Music","Bossa Nova","Funk","Gospel","Ska","Baroque","Romantic (Classical)","Opera","Cool Jazz","Indie Rock","Grunge","Alternative","Drum and Bass","Trance","Dubstep","J-Pop","Bollywood"]},moods:{label:"Moods",styles:["Happy","Sad","Relaxing","Energetic","Melancholic","Uplifting","Dreamy","Nostalgic","Romantic","Chill","Motivational","Dark","Mysterious","Epic","Cinematic","Playful","Introspective","Aggressive","Hopeful","Tense","Serene","Adventurous","Whimsical","Gloomy","Inspirational","Meditative","Party","Sentimental","Dramatic","Soothing"]},voices:{label:"Voices",styles:["Male Vocals","Female Vocals","Androgynous Vocals","Child Vocals","Choir","Harmonized Vocals","Spoken Word","Rap Vocals","Singing-Rapping (Melodic Rap)","Falsetto","Operatic Vocals","Growling","Whispered Vocals","Shouting Vocals","A Cappella","Vocal Effects","Multilingual Vocals","Chanting","Scat Singing"]},tempos:{label:"Tempos",styles:tt.map(e=>e.name),stylesWithInfo:tt}};var ta=s(48078),tl=s(53138);let tr=e=>{let{onStyleSelect:t,selectedStylesInput:s}=e,[r,n]=(0,l.useState)(null),[i,o]=(0,l.useState)([]),[c,d]=(0,l.useState)({}),[u,m]=(0,l.useState)(!1),x=(0,l.useRef)(null);(0,l.useEffect)(()=>{void 0!==s&&o(s.split(",").map(e=>e.trim()).filter(e=>e))},[s]);let p=e=>{if("random"===e){let e=Object.entries(ts).filter(e=>{let[t]=e;return"random"!==t}).reduce((e,t)=>{let[s,a]=t;return[...e,...a.styles]},[]);if(e.length>0){let s;let a=Math.floor(Math.random()*e.length),l=e[a];i.length>0?(s=[...i]).includes(l)||s.push(l):s=[l],o(s),t(s.join(", "))}}else{let t=c[e];if(u)return;m(!0),setTimeout(()=>{m(!1)},300);let s={};t||(s[e]=!0),d(s),n(t?null:e)}},f=e=>{let s;o(s=i.includes(e)?i.filter(t=>t!==e):[...i,e]),t(s.join(", "))};return(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)("div",{className:"flex w-full flex-wrap gap-2 p-2",children:Object.entries(ts).map(e=>{let[t,s]=e;return(0,a.jsx)("button",{onClick:()=>p(t),className:(0,h.cn)("w-fit rounded-full px-3 py-1.5 text-xs font-medium transition-all duration-200","random"===t?"bg-gradient-to-r from-orange-500 to-pink-500 text-white hover:opacity-90":c[t]?"bg-orange-500 text-white":"bg-white text-default-500 hover:bg-orange-50"),children:"random"===t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ta.JO,{icon:"game-icons:card-random",className:"mr-1 inline",width:16}),s.label]}):(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:`# ${s.label}`}),(0,a.jsx)(ta.JO,{icon:"heroicons:chevron-right",className:(0,h.cn)("inline transition-transform duration-200",c[t]?"rotate-90":""),width:14})]})},t)})}),(0,a.jsx)("div",{className:(0,h.cn)("overflow-hidden transition-all duration-300 ease-in-out",r&&c[r]?"border-t border-default-500/5 opacity-100":"h-0 opacity-0"),children:(0,a.jsx)("div",{ref:x,className:"flex flex-wrap gap-2 p-4",children:r&&ts[r]?.styles.map((e,t)=>{let s="tempos"===r&&Array.isArray(ts.tempos.stylesWithInfo)?ts.tempos.stylesWithInfo.find(t=>t.name===e):null,l=s&&s.info;return a.jsx("div",{className:"inline-flex items-center",children:a.jsxs("button",{onClick:()=>f(e),className:h.cn("inline-flex items-center gap-1 rounded-lg px-3 py-1.5 text-xs font-medium transition-all duration-200",i.includes(e)?"bg-orange-500/10 text-orange-500 ring-1 ring-orange-500":"bg-white text-default-500 hover:bg-orange-50"),children:[e,l&&a.jsx(tl.e,{content:a.jsx("span",{className:"text-xs !text-black",children:s.info}),placement:"top",children:a.jsx(ta.JO,{icon:"heroicons:information-circle",className:"text-default-500",width:16})})]})},e)})})})]})};var tn=s(26279),ti=s(38300);let to=e=>{let{title:t,audioRef:s,audioUrl:n,audioStatus:i,handlePlayPause:o,waveColor:c,progressColor:d,showDownloadButton:u,onDownload:m,onLoadStart:x,onLoadFinish:p,forceUpdate:h}=e,{t:f}=(0,r.Z)("common"),[g,j]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(n){w(!0),x&&x();let e=setTimeout(()=>{w(!1),p&&p()},5e3);return()=>clearTimeout(e)}},[n,h]);let b=()=>{if(!n)return console.error("尝试渲染音频波形但URL为空"),(0,a.jsx)("div",{className:"flex h-12 w-full items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs text-amber-600",children:"URL错误"})});let e=n;try{(e=n.split("?")[0]).startsWith("http")||(e=e.startsWith("//")?"https:"+e:e.startsWith("/")?window.location.origin+e:"https://"+e),e.includes("\\")&&(e=e.replace(/\\/g,""))}catch(e){console.error("处理音频URL时出错:",e,n)}return(0,a.jsx)(eo.Z,{wavesurfer:s,audioUrl:e,onPlayChange:e=>j(e),onPlayFinish:()=>{j(!1)},onLoadFinish:()=>{console.log("音频加载完成:",e),j(!1),w(!1),p&&p()},onError:t=>{console.error("音频加载错误:",t,e),w(!1);let s=new Audio;s.src=e,s.onerror=()=>console.error("直接加载音频也失败:",e),s.oncanplay=()=>console.log("直接加载音频成功:",e)},progressColor:d,waveColor:c,waveHeight:50,onLoadStart:()=>{console.log("音频开始加载:",e),w(!0),x&&x()},crossOrigin:"anonymous"},e)};return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 rounded-lg bg-[#f3f3f3] px-4 py-2",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600",children:t}),u&&(0,a.jsx)("button",{className:"flex h-6 w-6 items-center justify-center text-gray-400",onClick:m,disabled:!n||v,children:(0,a.jsx)(ta.JO,{icon:"mynaui:download",width:26})})]}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,a.jsx)("button",{className:`mr-2 flex h-9 w-9 items-center justify-center rounded-full transition-colors ${g?"bg-[#f97a22]":"bg-white hover:bg-[#fef6f4]"}`,onClick:()=>n&&o(s,g),disabled:!n||v,children:g?(0,a.jsx)(tn.Z,{size:16,className:"text-white"}):(0,a.jsx)(ti.Z,{size:16,className:"ml-0.5 text-black"})}),(0,a.jsx)("div",{className:"flex-1",children:(()=>{if(n)try{return b()}catch(e){if(console.error("渲染波形出错:",e),v)return(0,a.jsxs)("div",{className:"flex w-full items-center justify-center gap-2 p-2 text-xs font-medium text-primary",children:[(0,a.jsx)(ta.JO,{icon:"svg-spinners:bars-scale-middle",width:20}),f("app.stemSplitterDialog.loading")]});return(0,a.jsx)("div",{className:"flex w-full items-center justify-center gap-2 p-2 text-xs font-medium text-destructive",children:"波形渲染错误"})}return"error"===i?(0,a.jsx)("div",{className:"flex w-full items-center justify-center gap-2 p-2 text-xs font-medium text-destructive",children:f("app.stemSplitterDialog.processingFailed")}):"generating"===i?(0,a.jsxs)("div",{className:"flex w-full items-center justify-center gap-2 p-2 text-xs font-medium text-primary",children:[(0,a.jsx)(ta.JO,{icon:"svg-spinners:bars-scale-middle",width:20}),f("app.stemSplitterDialog.processingText")]}):"success"===i?(0,a.jsx)("div",{className:"flex w-full items-center justify-center gap-2 p-2 text-xs font-medium text-destructive",children:f("app.stemSplitterDialog.audioLoadFailed")}):"loading"===i?(0,a.jsxs)("div",{className:"flex w-full items-center justify-center gap-2 p-2 text-xs font-medium text-primary",children:[(0,a.jsx)(ta.JO,{icon:"svg-spinners:bars-scale-middle",width:20}),f("app.stemSplitterDialog.loading")]}):(0,a.jsx)("div",{className:"flex h-12 w-full items-center justify-center gap-2 sm:h-16",children:(0,a.jsx)("span",{className:"text-xs text-gray-500",children:f("app.stemSplitterDialog.waiting")})})})()})]})]})};var tc=e=>{let{stemSplitterDialog:t,setStemSplitterDialog:s,stemSplitterInfo:n}=e,{t:o}=(0,r.Z)("common"),{userStore:c}=(0,I.o)(),d=[{id:"drums",label:o("app.stemSplitterDialog.drums"),icon:"nimbus:drums",color:"bg-primary",hoverColor:"hover:bg-primary/90",iconColor:"#ffffff",content:o("app.stemSplitterDialog.content.drumsContent")},{id:"bass",label:o("app.stemSplitterDialog.bass"),icon:"qlementine-icons:bass-16",color:"bg-secondary",hoverColor:"hover:bg-secondary/90",iconColor:"#ffffff",content:o("app.stemSplitterDialog.content.bassContent")},{id:"piano",label:o("app.stemSplitterDialog.piano"),icon:"lucide:piano",color:"bg-accent",hoverColor:"hover:bg-accent/90",iconColor:"#ffffff",content:o("app.stemSplitterDialog.content.pianoContent")},{id:"guitar",label:o("app.stemSplitterDialog.guitar"),icon:"ph:guitar",color:"bg-secondary",hoverColor:"hover:bg-secondary/90",iconColor:"#ffffff",content:o("app.stemSplitterDialog.content.guitarContent")}],[u,m]=(0,l.useState)(0);(0,l.useEffect)(()=>{let e=setInterval(()=>{m(e=>{let t=e+(.8*Math.random()+.2);return t>95?95:t})},1e3);return()=>{clearInterval(e)}},[]);let[x,p]=(0,l.useState)("drums"),[h,f]=(0,l.useState)("select"),g=(0,l.useRef)(null),j=(0,l.useRef)(null),v=(0,l.useRef)(null),w=(0,l.useRef)(null),[b,y]=(0,l.useState)(""),[D,S]=(0,l.useState)(""),[C,k]=(0,l.useState)(""),[Z,_]=(0,l.useState)(""),[P,L]=(0,l.useState)(""),[M,E]=(0,l.useState)(!0),O=(0,l.useRef)(!1);(0,l.useEffect)(()=>{O.current=!0,E(!0),n?.item?.audioUrl&&w.current?(w.current.src=n.item.audioUrl,w.current.load(),w.current.oncanplaythrough=()=>{O.current&&E(!1)},w.current.onerror=()=>{O.current&&E(!1)}):E(!1);let e=setTimeout(()=>{O.current&&E(!1)},5e3);return()=>{clearTimeout(e),O.current=!1}},[n]);let A=e=>{p(e),_(""),S(""),k(""),m(0),_("generating"),f("result"),$(e,!0)},U=e=>{switch(e){case"drums":default:return{only:o("app.stemSplitterDialog.onlyDrums"),without:o("app.stemSplitterDialog.withoutDrums")};case"bass":return{only:o("app.stemSplitterDialog.onlyBass"),without:o("app.stemSplitterDialog.withoutBass")};case"piano":return{only:o("app.stemSplitterDialog.onlyPiano"),without:o("app.stemSplitterDialog.withoutPiano")};case"guitar":return{only:o("app.stemSplitterDialog.onlyGuitar"),without:o("app.stemSplitterDialog.withoutGuitar")}}},$=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!O.current||!n)return;let s=e||x;(0,N.Z)({url:`/api/v1/vocal-removal/detail?recordId=${n.record?.id}&musicIndex=${n.index}&action=${s}`,method:"get"}).then(a=>{if(O.current){if(200===a.code){if(!a.data){t&&z(s);return}switch(a.data.status){case"GENERATING":_("generating"),setTimeout(()=>{$(e)},1500);break;case"SUCCESS":let l;try{l="string"==typeof a.data.fileLink?JSON.parse(a.data.fileLink):a.data.fileLink}catch(e){console.error("解析fileLink失败:",e,a.data.fileLink),_("error"),L("音频数据格式错误");return}if(!l){console.error("fileLinks为空:",a.data),_("error"),L("音频数据为空");return}let r=null,n=null;try{"drums"===s?(r=l.only_drums_url,n=l.without_drums_url):"bass"===s?(r=l.only_bass_url,n=l.without_bass_url):"piano"===s?(r=l.only_piano_url,n=l.without_piano_url):"guitar"===s&&(r=l.only_guitar_url,n=l.without_guitar_url),r||n?(r&&S(String(r)),n&&k(String(n)),_("success")):z(s)}catch(e){console.error("处理音频URL时出错:",e),z(s)}break;case"FAILED":_("error"),L(""),t&&z(s)}}else t?z(s):setTimeout(()=>{$(e)},1500)}}).catch(a=>{O.current&&(t?z(s):setTimeout(()=>{$(e)},1500),console.log("加载失败:",a))})},z=e=>{_("generating"),(0,N.Z)({url:"/api/v1/vocal-removal/create",method:"post",data:{recordId:n.record?.id,musicIndex:n.index,action:e||x}}).then(t=>{O.current&&(200===t.code?$(e):(_("error"),L(t.msg)))}).catch(e=>{O.current&&(console.log("创建失败:",e),_("error"),L(e.message||""))})},V=(e,t)=>{if(e?.current)try{t?e.current.pause():(g.current?.pause(),j.current?.pause(),v.current?.pause(),e.current.play())}catch(e){console.error("音频播放错误:",e)}},B=()=>{E(!0)},J=()=>{E(!1),"loading"===Z&&(setIsUploading(!1),_("success"))},G=async()=>{let e=U(x);try{let t=new(i()),s=n?.item?.title||"audio",a=n?.item?.audioUrl?n.item.audioUrl.split("?")[0]:"",l=D?D.split("?")[0]:"",r=C?C.split("?")[0]:"",c=[];a&&c.push(fetch(a,{method:"GET",mode:"cors",headers:{"Content-Type":"audio/mpeg"}}).then(e=>{if(e.ok)return e.blob();throw Error("原始音频下载失败")}).then(e=>{t.file(`${s}_${o("app.stemSplitterDialog.origin")}`,e)}).catch(e=>console.error("下载原始音频失败:",e))),l&&c.push(fetch(l,{method:"GET",mode:"cors",headers:{"Content-Type":"audio/mpeg"}}).then(e=>{if(e.ok)return e.blob();throw Error("音频下载失败")}).then(a=>{let r=l.substring(l.lastIndexOf(".")).toLowerCase();t.file(`${s}_${e.only}${r}`,a)}).catch(e=>console.error("下载音频失败:",e))),r&&c.push(fetch(r,{method:"GET",mode:"cors",headers:{"Content-Type":"audio/mpeg"}}).then(e=>{if(e.ok)return e.blob();throw Error("音频下载失败")}).then(a=>{let l=r.substring(r.lastIndexOf(".")).toLowerCase();t.file(`${s}_${e.without}${l}`,a)}).catch(e=>console.error("下载音频失败:",e))),await Promise.all(c);let d=await t.generateAsync({type:"blob"}),u=document.createElement("a");u.href=URL.createObjectURL(d),u.download=`${s}.zip`,u.click()}catch(t){console.error("打包下载失败:",t),cleanOnlyUrl&&(0,F.$)(cleanOnlyUrl,e.only),cleanWithoutUrl&&(0,F.$)(cleanWithoutUrl,e.without)}};if(!t)return null;let H=U(x),W=d.find(e=>e.id===x)||d[0];return(0,a.jsx)(T.Vq,{open:t,onOpenChange:e=>{e||(O.current=!1,setTimeout(()=>{f("select"),_(""),S(""),k(""),L(""),E(!1),p("drums")},300)),s(e)},children:(0,a.jsxs)(T.cZ,{className:"w-[95%] overflow-hidden border border-neutral-100 lg:max-w-3xl",children:[(0,a.jsx)("audio",{ref:w,style:{display:"none"},preload:"auto"}),(0,a.jsx)(T.fK,{children:(0,a.jsxs)(T.$N,{className:"flex flex-col items-start gap-2",children:["select"===h&&(0,a.jsx)("div",{className:"flex w-full flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,a.jsx)("div",{className:"font-semibold text-neutral-900",children:n?.item?.title}),(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:(0,eT.QO)(n?.item?.duration)})]})}),"result"===h&&"generating"===Z&&(0,a.jsxs)("div",{className:"flex w-full flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"font-semibold text-neutral-900",children:n?.item?.title}),(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:(0,eT.QO)(n?.item?.duration)})]}),"result"===h&&"success"===Z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-3 flex w-full items-center justify-between",children:(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>{f("select"),_("")},className:"hover:bg-background-card flex items-center gap-1 rounded-full bg-neutral-100 p-1.5 opacity-70 transition-opacity hover:opacity-100",children:(0,a.jsx)(ta.JO,{icon:"ion:chevron-back",width:16,className:"text-black"})}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ta.JO,{icon:W.icon,width:18,className:"text-amber-500"}),(0,a.jsx)("span",{className:"font-semibold text-black",children:W.label})]})]})}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-400",children:[(0,a.jsx)("div",{children:n?.item?.title}),(0,a.jsx)("span",{children:" • "}),(0,a.jsx)("div",{children:(0,eT.QO)(n?.item?.duration)})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("button",{className:"flex items-center gap-1 rounded-full bg-gradient-to-br from-amber-400 to-amber-700 px-3 py-1.5 text-xs text-white transition duration-500 hover:scale-95",onClick:()=>{R.Am.promise(async()=>{await G()},{pending:"Downloading...",success:"Downloaded successfully \uD83D\uDC4C",error:"Download failed \uD83E\uDD2F"})},disabled:"generating"===Z||!D||!C,children:[(0,a.jsx)(ta.JO,{icon:"mynaui:download",width:16}),(0,a.jsx)("span",{children:o("app.stemSplitterDialog.downloadAll")})]})})]})]})]})}),(0,a.jsx)("div",{className:"w-full pb-6",children:"select"===h?(0,a.jsx)("div",{className:"grid w-full grid-cols-2 gap-4",children:d.map(e=>(0,a.jsx)("button",{className:"group relative cursor-pointer overflow-hidden rounded-lg border border-none bg-[#f3f3f3] transition-all hover:border-[#f97a22]/30 hover:bg-[#fef6f4]",onClick:()=>A(e.id),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4",children:[(0,a.jsx)("span",{className:"mb-3 flex h-14 w-14 items-center justify-center rounded-full bg-white transition-transform group-hover:scale-110",children:(0,a.jsx)(ta.JO,{icon:e.icon,className:"text-amber-500",width:24})}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:e.label}),(0,a.jsx)("span",{className:"text-sm text-neutral-400",children:e.content})]})]})},e.id))}):(0,a.jsxs)(a.Fragment,{children:["generating"===Z&&(0,a.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center rounded-md bg-[#f3f3f3] py-10",children:[(0,a.jsx)("span",{className:"inline-flex h-12 w-12 items-center justify-center",children:(0,a.jsx)(ta.JO,{icon:"svg-spinners:eclipse-half",className:"h-full w-full text-amber-500"})}),(0,a.jsxs)("div",{className:"mt-6 px-4 text-center",children:[(0,a.jsx)("p",{className:"text-lg font-medium text-black",children:o("app.stemSplitterDialog.processing")}),(0,a.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:o("app.stemSplitterDialog.largeFileProcess")})]}),(0,a.jsxs)("div",{className:"relative mt-8 w-[80%]",children:[(0,a.jsx)("div",{className:"h-1.5 w-full rounded-full bg-neutral-200",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-amber-400 transition-all duration-1000",style:{width:`${u}%`}})}),(0,a.jsx)("div",{className:"absolute bottom-[-20px] left-0 text-xs text-neutral-600",children:o("app.stemSplitterDialog.processingPatterns")}),(0,a.jsxs)("div",{className:"absolute bottom-[-20px] right-0 text-xs text-neutral-600",children:[Math.round(u),"%"]})]})]}),"generating"!==Z&&(0,a.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center",children:(0,a.jsxs)("div",{className:"w-full space-y-3",children:[(0,a.jsx)(to,{title:o("app.stemSplitterDialog.origin"),audioRef:g,audioUrl:n?.item?.audioUrl,audioStatus:"success",handlePlayPause:V,waveColor:"#9ca3af",progressColor:"#d946ef",showDownloadButton:!0,onDownload:()=>(0,F.$)(n?.item?.audioUrl,`${n?.item?.title||"audio"}_${o("app.stemSplitterDialog.origin")}`),onLoadStart:B,onLoadFinish:J,forceUpdate:t}),(0,a.jsx)(to,{title:H.only,audioRef:j,audioUrl:D,audioStatus:Z,handlePlayPause:V,waveColor:"#22c55e",progressColor:"#16a34a",showDownloadButton:!0,onDownload:()=>(0,F.$)(D,`${n?.item?.title||"audio"}_${H.only}`),onLoadStart:B,onLoadFinish:J,forceUpdate:t}),(0,a.jsx)(to,{title:H.without,audioRef:v,audioUrl:C,audioStatus:Z,handlePlayPause:V,waveColor:"#8b5cf6",progressColor:"#7c3aed",showDownloadButton:!0,onDownload:()=>(0,F.$)(C,`${n?.item?.title||"audio"}_${H.without}`),onLoadStart:B,onLoadFinish:J,forceUpdate:t})]})})]})})]})})},td=s(80317),tu=s(16265),tm=s(46759),tx=s(29904),tp=s(1631),th=s(2487),tf=e=>{let{onClose:t}=e,{t:s}=(0,r.Z)("common"),[n,i]=(0,l.useState)(0),[o,c]=(0,l.useState)(!0),[d,u]=(0,l.useState)(!1),m=s(`privileges.list.${n}.items`,{},{returnObjects:!0}),x={0:[(0,a.jsx)(e4.Z,{className:"h-4 w-4"},"coins"),(0,a.jsx)(tu.Z,{className:"h-4 w-4"},"filecheck"),(0,a.jsx)(tm.Z,{className:"h-4 w-4"},"cloud")],1:[(0,a.jsx)(eO.Z,{className:"h-4 w-4"},"music"),(0,a.jsx)(e2.Z,{className:"h-4 w-4"},"wand2"),(0,a.jsx)(tx.Z,{className:"h-4 w-4"},"split")],2:[(0,a.jsx)(tp.Z,{className:"h-4 w-4"},"zap"),(0,a.jsx)(e0.Z,{className:"h-4 w-4"},"lock"),(0,a.jsx)(e3.Z,{className:"h-4 w-4"},"timer")]},p=(0,l.useCallback)(()=>{d||i(e=>(e+1)%3)},[d]);(0,l.useEffect)(()=>{let e;return o&&!d&&(e=setInterval(p,3e3)),()=>clearInterval(e)},[o,d,p]);let f=e=>(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:e}});return(0,a.jsx)("div",{className:"my-4 w-full overflow-hidden rounded-2xl bg-gradient-to-r from-orange-500/10 via-orange-300/10 to-orange-700/10 backdrop-blur transition duration-500",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),role:"region","aria-label":"Premium features carousel",children:(0,a.jsxs)("div",{className:"relative p-4",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-default-600",children:s("privileges.title")}),(0,a.jsx)("button",{className:"text-default-400 transition duration-500 hover:text-default-600","aria-label":"Close premium features",onClick:t,children:(0,a.jsx)(eS.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"mb-2 space-y-2",children:m.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-default-300 transition duration-500",style:{transform:"translateY(0)",transition:"transform 0.3s ease-in-out"},children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center text-orange-600",children:x[n][t]}),(0,a.jsx)("span",{className:"font-medium text-default-500",children:f(s(`privileges.list.${n}.items.${t}.text`,{credits:th.ex}))})]},t))}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex space-x-1.5",children:[0,1,2].map(e=>(0,a.jsx)("div",{className:(0,h.cn)("h-1 rounded-full transition duration-300",n===e?"w-6 bg-orange-600":"w-4 bg-default-700/15 hover:bg-default-500"),role:"button","aria-label":`Go to slide ${e+1}`,onClick:()=>{i(e),c(!1)}},e))}),(0,a.jsx)(H(),{href:"/pricing",className:"rounded-full bg-gradient-to-r from-orange-500 to-pink-600 px-4 py-2 text-sm font-semibold text-default-50 transition duration-500 hover:scale-105 hover:bg-[#1DB581]/90","aria-label":"Subscribe",children:s("privileges.upgradeNow")})]})]})})};let tg=(0,_.Pi)(e=>{let{onClose:t,pendingRecordSize:s,setGoToSubscribePlanModal:n}=e,{t:i}=(0,r.Z)("common"),{userStore:o}=(0,I.o)(),[c,d]=(0,l.useState)(!0),u="Ultra"===o.getUserPlan();return(0,l.useEffect)(()=>{!c&&t&&t()},[c,t]),(0,a.jsx)(a.Fragment,{children:c&&(0,a.jsx)("div",{className:"fixed right-2 top-4 z-50 w-64 rounded-lg border border-default-100 bg-white shadow-lg",children:(0,a.jsxs)("div",{className:"px-4 py-3",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2 rounded-full bg-orange-600/10 px-2 py-1.5 text-xs text-default-700",children:[(0,a.jsx)(eO.Z,{className:"h-4 w-4 text-orange-600"}),s,"/",o.user?.concurrentLimit||1]}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:i("concurrentJobsDialog.job",{jobNum:s})}),(0,a.jsx)("div",{className:"h-2 w-full animate-pulse rounded-full bg-gray-200"})]})]}),(0,a.jsx)("button",{onClick:()=>d(!1),className:"group absolute -right-1 -top-1 rounded-full border border-default-100 bg-default-50 p-1",children:(0,a.jsx)(eS.Z,{className:"h-3.5 w-3.5 text-default-500 transition duration-500 group-hover:text-default-700"})})]}),!u&&(0,a.jsxs)("button",{onClick:()=>n(!0),className:"flex items-center text-xs font-medium text-orange-600 transition duration-500 hover:text-orange-500",children:[i("concurrentJobsDialog.tasks")," →"]})]})})})}),tj=(0,_.Pi)(e=>{let{adDataAppBottomRightPopup:t,openAdvertisement:s,setOpenAdvertisement:n}=e,{t:p}=(0,r.Z)("common"),D=(0,c.useRouter)(),{userStore:S}=(0,I.o)(),[_,T]=(0,l.useState)(""),[M,E]=(0,l.useState)(""),[O,G]=(0,l.useState)(""),[H,q]=(0,l.useState)(""),[K,Y]=(0,l.useState)(!1),[X,Q]=(0,l.useState)(!1),ee=(0,l.useRef)(null),[es,ea]=(0,l.useState)(!1),[el,ei]=(0,l.useState)([]),[eo,ed]=(0,l.useState)(!1),[eu,em]=(0,l.useState)(null),[ex,ep]=(0,l.useState)(!1),[eh,ej]=(0,l.useState)(!1),[ev,ew]=(0,l.useState)(!1),[eb,eD]=(0,l.useState)(""),[eS,eC]=(0,l.useState)(!1),[ek,eZ]=(0,l.useState)(!1),[eI,e_]=(0,l.useState)(1),[eF,eP]=(0,l.useState)(!0),eR=(0,l.useRef)(null),[eL,eT]=(0,l.useState)(3e3),[eM,eE]=(0,l.useState)(eL),[eO,eA]=(0,l.useState)(199),[eU,e$]=(0,l.useState)(200),[ez,eV]=(0,l.useState)(eU),[eB,eG]=(0,l.useState)(!1),[eH,eW]=(0,l.useState)(!1),[eq,eK]=(0,l.useState)(null),[eY,eX]=(0,l.useState)(""),[e0,e1]=(0,l.useState)(!1),[e2,e5]=(0,l.useState)(null),[e3,e4]=(0,l.useState)(!1),[e6,e7]=(0,l.useState)(!1),[tt,ts]=(0,l.useState)(!1),[ta,tn]=(0,l.useState)(!1),[ti,to]=(0,l.useState)("Prime"),[tu,tm]=(0,l.useState)(!1),[tx,tp]=(0,l.useState)(!1),[th,tj]=(0,l.useState)(null),[tv,tw]=(0,l.useState)([]),[tb,ty]=(0,l.useState)(!1),[tN,tD]=(0,l.useState)(!1),[tS,tC]=(0,l.useState)(!1),[tk,tZ]=(0,l.useState)({}),[tI,t_]=(0,l.useState)(!1),[tF,tP]=(0,l.useState)(!1),[tR,tL]=(0,l.useState)(null),[tT,tM]=(0,l.useState)(null),[tE,tO]=(0,l.useState)(null),[tA,tU]=(0,l.useState)(!1),[t$,tz]=(0,l.useState)(!0),[tV,tB]=(0,l.useState)(!1),[tJ,tG]=(0,l.useState)(!1),[tH,tW]=(0,l.useState)(null),[tq,tK]=(0,l.useState)(!1),[tY,tX]=(0,l.useState)(!1),[tQ,t0]=(0,l.useState)(!1),[t1,t2]=(0,l.useState)({}),[t5,t3]=(0,l.useState)("list"),[t4,t6]=(0,l.useState)(!1),[t7,t9]=(0,l.useState)(!0),[t8,se]=(0,l.useState)(!1),[st,ss]=(0,l.useState)(!0),[sa,sl]=(0,l.useState)([]),[sr,sn]=(0,l.useState)(!1),[si,so]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=e=>{let t="INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName;"Space"===e.code&&!t&&(e.preventDefault(),eu&&eu.item&&eR.current&&eR.current.audio.current&&(ex?(eR.current.audio.current.pause(),ep(!1)):(eR.current.audio.current.play(),ep(!0))))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[eu,ex]),(0,l.useEffect)(()=>{t$&&S.user&&(S.user?.vipFlag&&(to(localStorage.getItem("selectedType")||"Fusion"),tU(!0)),tz(!1))},[S.user]),(0,l.useEffect)(()=>{sc()},[tT,tE]),(0,l.useEffect)(()=>{let e,t;"Fusion"===ti?(e=5e3,t=1e3):"Prime"===ti?(e=3e3,t=200):"Core"===ti&&(e=3e3,t=200),eT(e),e$(t)},[ti]),(0,l.useEffect)(()=>{sw(_,!0)},[eL]),(0,l.useEffect)(()=>{sy(O,!0)},[eU]);let sc=async e=>{eo||(ed(!0),e?await sh(eI+1):await sh(1))},sd=e=>{tj(e),"delete"!=e&&tw(e=>e.filter(e=>1!==e.isExpire))},su=(e,t,s,a,l)=>{if(20===tv.length){R.Am.warning(p("batchOperation.maxNum"));return}(1!==s||"library"!==th&&"download"!==th)&&tw(r=>r.some(s=>s.recordId===e&&s.index===t)?r.filter(s=>!(s.recordId===e&&s.index===t)):[...r,{recordId:e,index:t,isExpire:s,url:a,name:l}])},sm=()=>{if(tb)return;ty(!0);let e=tv.map((e,t)=>({recordId:e.recordId,audioIndex:e.index}));(0,N.Z)({url:"/api/v1/suno/batchDelete",method:"post",data:{batchOperateList:e}}).then(e=>{200===e.code?(sc(),R.Am.success(p("batchOperation.deletedSuccess"))):R.Am.error(e.msg),ty(!1),tj(null),tw([])}).catch(e=>{console.log(e),ty(!1)})},sx=async()=>{if(!S.user||!S.user.vipFlag){S.user&&0===S.user.checkCountVersion?eZ(!0):se(!0);return}ty(!0);let e=new(i());try{let t=tv.map(async t=>{try{let s=await fetch(t.url);if(!s.ok)throw Error(s.statusText);let a=await s.blob(),l=`${t.name.replace(/[\\/:*?"<>|]/g,"")}-${t.index+1}.mp3`;return e.file(l,a),{success:!0,name:t.name}}catch(e){return console.error(e),{success:!1,name:t.name}}});(await Promise.all(t)).filter(e=>!e.success).length>0&&R.Am.warning(p("batchOperation.downloadedFailed"));let s=await e.generateAsync({type:"blob",compression:"DEFLATE"}),a=new Date,l=a.getFullYear()+String(a.getMonth()+1).padStart(2,"0")+String(a.getDate()).padStart(2,"0")+String(a.getHours()).padStart(2,"0")+String(a.getMinutes()).padStart(2,"0")+String(a.getSeconds()).padStart(2,"0");(0,o.saveAs)(s,`songs_${tv.length}_${l}.zip`),R.Am.success(p("batchOperation.DownloadedSuccess"))}catch(e){console.error(e),ty(!1)}finally{tj(null),ty(!1),tw([])}},sp=()=>{if(tb)return;ty(!0);let e=tv.map((e,t)=>({recordId:e.recordId,audioIndex:e.index}));(0,N.Z)({url:"/api/v1/collection/batchCollect",method:"post",data:{batchOperateList:e}}).then(t=>{200===t.code?(tv.map(e=>{eu.record.id===e.recordId&&eu.itemIndex===e.index&&em(e=>({...e,item:{...e.item,collected:!0}}))}),sA(e.map(e=>e.recordId)),R.Am.success(p("batchOperation.collectedSuccess"))):R.Am.error(t.msg),ty(!1),tj(null),tw([])}).catch(e=>{console.log(e),ty(!1)})},sh=async e=>{try{let t=await (0,N.Z)({url:"/api/v1/suno/pageRecordList",method:"get",params:{pageNum:e,searchContent:eY,startTime:tT,endTime:tE}});if(200===t.code){let s,a=t.data,l=a.records||[];s=1==e?[...l]:[...el,...l],ei(s),eP(a.pages>a.current),e_(e)}ed(!1)}catch(e){console.error(e),ed(!1)}},sf=e=>{q(e)};(0,l.useEffect)(()=>{let e=setTimeout(()=>{sg()},2e3);return()=>clearTimeout(e)},[el]);let sg=()=>{let e=el.filter(e=>"success"!==e.state&&"fail"!==e.state||"generating"===e.wavState||"generating"===e.mp4State).map(e=>e.id);sl(e),e.length>0?(0,N.Z)({url:"/api/v1/suno/loadPendingRecordList",method:"post",data:{pendingRecordIdList:e}}).then(e=>{if(200===e.code){let t=e.data||[];ei(e=>{let s=!0;return[...e.map(e=>{let a=t.find(t=>t.id===e.id);if(a){if(s){let t=e.sunoData?.sunoData||[],l=a.sunoData?.sunoData||[];t.length<=0?s=!1:t.forEach((e,t)=>{let s=l[t]||{};"generating"===e.mp4State&&"success"===s.mp4State&&s.mp4Url&&(0,F.$)(s.mp4Url,s.title),"generating"===e.wavStatus&&"success"===s.wavStatus&&s.wavUrl&&(0,F.$)(s.wavUrl,s.title)})}return a}return e})]})}}).catch(e=>{ei([...el]),console.error(e)}):(ea(!1),sn(!1))},sj=async(e,t,s)=>{if(!S.user){S.setOpenLoginPopup(!0);return}if(!S.user||!S.user.vipFlag){S.user&&0===S.user.checkCountVersion?eZ(!0):se(!0);return}if(e.mp4State&&"fail"!==e.mp4State&&"needregenerate"!==e.mp4State)"success"===e.mp4State&&(0,F.$)(e.mp4Url,e.title);else try{ei(e=>{let a=e.find(e=>e.id===t);return a&&((a.sunoData?.sunoData[s]||{}).mp4State="generating"),[...e]});let e=await (0,N.Z)({url:"/api/v1/mp4/createMp4",method:"post",data:{recordId:t,audioIndex:s}});200===e.code?ei(e=>{let s=e.find(e=>e.id===t);return s&&(s.mp4State="generating"),[...e]}):v.ZP.error(e.msg)}catch(e){console.log(e)}};(0,l.useEffect)(()=>{if(el.length>0){let e=el[0],t=0;if(eu){let s=el.find(e=>e.id===eu.record.id);s&&(e=s,t=eu.itemIndex??0)}let s=e.sunoData?.sunoData||[];if(s.length>0){let a=s.find((e,s)=>!e.deleteFlag&&s===t);a||(t=s.findIndex(e=>!e.deleteFlag),a=s[t]),sI(e,a,t,!1)}else sI(e,null,0,!1)}},[el]);let sv=(e,t)=>{let s=0,a=0,l=0;for(let r=0;r<e.length;r++)s<=t&&(a=r,l=s),e.charCodeAt(r)>127?s+=2:s+=1;return{length:s,lastIndex:a,realLength:l}},sw=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=sv(e,eL);s.length<=eL?(T(e),eE(eL-s.length)):(T(e.substring(0,s.lastIndex)),eE(eL-s.realLength),t&&v.ZP.warning(p("app.switchInputLimitExceededMessage")))},sb=e=>{let t=sv(e,199);t.length<=199?(E(e),eA(199-t.length)):(E(e.substring(0,t.lastIndex)),eA(199-t.realLength))},sy=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.length;s<=eU?(G(e),eV(eU-s)):(G(e.substring(0,eU)),eV(0),t&&v.ZP.warning(p("app.switchInputLimitExceededMessage")))},sN=()=>{if(K&&!X){if(!_)return v.ZP.error("Please enter lyrics"),!0;if(!O)return v.ZP.error("Please enter Style"),!0;if(!H)return v.ZP.error("Please enter Title"),!0}if(K&&X){if(!O)return v.ZP.error("Please enter Style"),!0;if(!H)return v.ZP.error("Please enter Title"),!0}return!K&&!M&&(v.ZP.error("Please enter lyrics description"),!0)},sD=e=>{ea(!1),eG(!1),R.Am.error("turnstile verify failed",{position:"top-center"})},sS=async()=>{es||sN()||(ea(!0),await sC(""))},sC=async e=>{if(sN()){ea(!1);return}try{ea(!0);let t=await (0,N.Z)({url:"/api/v1/suno/create",method:"post",data:{prompt:K&&!X?_:M,style:O,title:H,customMode:K,instrumental:X,model:ti,privateFlag:tA},headers:{verify:e||""}});if(100001===t.code){eG(!0);return}439===t.code&&(S.user&&0===S.user.checkCountVersion?e7(!0):se(!0),ea(!1)),(430===t.code||429===t.code)&&(S.user?S.user.vipFlag?v.ZP.error(t.msg):S.user&&0===S.user.checkCountVersion?e1(!0):se(!0):S.setOpenLoginPopup(!0),ea(!1)),455===t.code&&(ew(!0),eD(t.msg),ea(!1)),460===t.code&&(S.user&&S.user.vipFlag&&parseInt(S.user.vipLevel)>=2?v.ZP.error(t.msg):sn(!0),ea(!1)),200===t.code&&(await sc(),(0,R.Am)(p("app.generateSuccessTips"),{autoClose:5e3}),S.loadUserInfo(),ea(!1))}catch(e){ea(!1),console.log(e)}},sk=e=>{Y(e)},sZ=e=>{Q(e)},sI=(e,t,s,a)=>{let l=`${e.id}-${s}`,r=t?.audioUrl||t?.streamAudioUrl||"";eu&&eu.recordItemId===l?eu.audioUrl===r?a&&s_():em(a=>({recordItemId:`${e.id}-${s}`,record:e,item:t,audioUrl:r,itemIndex:s,autoPlay:a.autoPlay})):(em({recordItemId:`${e.id}-${s}`,record:e,item:t,audioUrl:t?.audioUrl||t?.streamAudioUrl||"",itemIndex:s,autoPlay:a}),a||ep(!1))},s_=()=>{eR.current&&eR.current.audio.current&&(eR.current.audio.current.paused?(eR.current.audio.current.play(),ep(!0)):(eR.current.audio.current.pause(),ep(!1)))};(0,l.useEffect)(()=>{eu&&eu.item&&eu.autoPlay&&eR.current&&eR.current.audio.current&&(eR.current.audio.current.play(),ep(!0))},[eu]);let sF=(e,t)=>{if(!S.user||!S.user.vipFlag){S.user&&0===S.user.checkCountVersion?eZ(!0):se(!0);return}(0,F.$)(e,t)},sP=async(e,t,s)=>{if(!(S.user&&S.user.vipFlag&&(parseInt(S.user?.vipLevel)>=2||S.user?.checkCountVersion<2))){ss(!1),S.user&&0===S.user.checkCountVersion?eZ(!0):se(!0);return}if(e.wavStatus&&"fail"!==e.wavStatus&&"needregenerate"!==e.wavStatus)"success"===e.wavStatus&&(0,F.$)(e.wavUrl,e.title);else try{ei(e=>{let a=e.find(e=>e.id===t);return a&&((a.sunoData?.sunoData[s]||{}).wavStatus="generating"),[...e]});let e=await (0,N.Z)({url:"/api/v1/suno/createWavFormatUrl",method:"post",data:{recordId:t,audioIndex:s}});200===e.code?ei(e=>{let s=e.find(e=>e.id===t);return s&&(s.wavState="generating"),[...e]}):v.ZP.error(e.msg)}catch(e){console.log(e)}},sR=async(e,t,s)=>{var a;if(!S.user||!S.user.vipFlag){S.user&&0===S.user.checkCountVersion?eZ(!0):se(!0);return}eK({recordId:e.id,audioIndex:s,title:t.title,style:t.tags||e.paramData?.style||"",prompt:t.prompt||e.paramData?.prompt||"",continueAt:e.paramData?.continueAt||0,maxDuration:(a=t.duration,`${Math.floor(a/60).toString().padStart(2,"0")}:${Math.floor(a%60).toString().padStart(2,"0")}`),imageUrl:t.imageUrl,model:e.paramData?.model}),eW(!0)},sL=async(e,t)=>{try{let s=await (0,N.Z)({url:"/api/v1/suno/delete",method:"post",data:{recordId:e,audioIndex:t}});200===s.code&&(R.Am.success(p("sidebar.deleteSuccess")),ei(s=>s.filter(s=>{if(e!==s.id)return!0;let a=s.sunoData?.sunoData||[];return!(a.length<=0)&&((a[t]||{}).deleteFlag=!0,!a.every(e=>e.deleteFlag))})))}catch(e){console.log(e)}},sT=async(e,t,s,a)=>{if(!S.user){S.setOpenLoginPopup(!0);return}try{let a=await (0,N.Z)({url:"/api/v1/collection/collectMusic",method:"post",data:{musicId:e,musicIndex:t,collectStatus:s}});200===a.code&&(el.forEach(a=>{a.id===e&&a.sunoData?.sunoData?.forEach((e,a)=>{t===a&&(e.collected=s)})}),ei([...el]),eu&&eu.record.id===e&&eu.itemIndex===t&&em(e=>({...e,item:{...e.item,collected:s}})),v.ZP.success(s?p("app.library.collectSuccessTips"):p("app.library.cancelCollectSuccessTips")))}catch(e){console.error("The server is abnormal. Please try again later:",e)}},sM=(e,t)=>{let s={...e};if(s.recordPath=t?.recordPath||"",S.user?.vipFlag&&(S.user?.subInterval==="year"||S.user?.checkCountVersion<2)){t_(!0),tL(s);return}tP(!0)},sE=(e,t,s)=>{if(!(S.user&&S.user.vipFlag&&(parseInt(S.user?.vipLevel)>=2||S.user?.checkCountVersion<2))){ss(!1),S.user&&0===S.user.checkCountVersion?eZ(!0):se(!0);return}tZ({record:e,item:t,index:s}),tC(!0),eR.current?.audio?.current?.pause(),ep(!1)},sO=(e,t,s)=>{if(!(S.user&&S.user.vipFlag&&(parseInt(S.user?.vipLevel)>=2||S.user?.checkCountVersion<2))){ss(!1),S.user&&0===S.user.checkCountVersion?eZ(!0):se(!0);return}t2({record:e,item:t,index:s}),t0(!0),eR.current?.audio?.current?.pause(),ep(!1)},sA=e=>{ed(!0),(0,N.Z)({url:"/api/v1/suno/loadPendingRecordList",method:"post",data:{pendingRecordIdList:e}}).then(e=>{if(200===e.code){let t=e.data||[];ei(e=>[...e.map(e=>t.find(t=>t.id===e.id)||e)])}}).finally(()=>{ed(!1)})},sU=e=>{S.user?S.user&&S.user?.vipFlag?tU(e):S.user&&0===S.user.checkCountVersion?tB(!0):se(!0):S.setOpenLoginPopup(!0)},s$=e=>{if(!e||!e.paramData)return;let t=e.paramData;Y(t.customMode||!1),Q(t.instrumental||!1),t.customMode?(sb(""),sw(t.prompt||""),sy(t.style||""),sf(t.title||"")):(sb(t.prompt||""),sw(""),sy(""),sf("")),window.innerWidth<=768&&tG(!0)},sz=()=>{if(!eu||!eu.record)return{recordIndex:-1,songIndex:-1};let e=el.findIndex(e=>e.id===eu.record.id);return -1===e?{recordIndex:-1,songIndex:-1}:{recordIndex:e,songIndex:eu.itemIndex}},sV=async()=>{let{recordIndex:e,songIndex:t}=sz(),s=sJ();if("single"===t5){eR.current&&eR.current.audio.current&&(eR.current.audio.current.currentTime=0,eR.current.audio.current.play());return}if("random"===t5){let e=0;for(;e<10;){if(s.length>0){let e=Math.floor(Math.random()*s.length),t=s[e],a=sG(t);if(a.length>0){let e=Math.floor(Math.random()*a.length),s=(t.sunoData?.sunoData||[]).findIndex(t=>t.id===a[e].id);sI(t,a[e],s,!0);return}}e++}sB();return}if(-1!==e){let a=el[e],l=a.sunoData?.sunoData||[];if(t<l.length-1){let e=l.findIndex((e,s)=>!e.deleteFlag&&1!==e.isExpire&&s>t);if(-1!==e){sI(a,l[e],e,!0);return}}let r=s.findIndex(e=>e.id===a.id);if(-1!==r){let e=r+1;for(;e<s.length;){let t=s[e],a=sG(t);if(a.length>0){let e=(t.sunoData?.sunoData||[]).findIndex(e=>e.id===a[0].id);sI(t,a[0],e,!0);return}e++}}if(-1!==r&&r>=s.length-1&&eF)try{let e=el.length;await sc(!0),sJ();for(let t=e;t<el.length;t++){let e=el[t];if("success"===e.state){let t=sG(e);if(t.length>0){let s=(e.sunoData?.sunoData||[]).findIndex(e=>e.id===t[0].id);sI(e,t[0],s,!0);return}}}}catch(e){console.error("Failed to load more songs:",e)}}if(s.length>0){let e=s[0],t=sG(e);if(t.length>0){let s=(e.sunoData?.sunoData||[]).findIndex(e=>e.id===t[0].id);sI(e,t[0],s,!0);return}}sB()},sB=()=>{let e=sJ();if(e.length>0){let t=e[0],s=sG(t);if(s.length>0){let e=(t.sunoData?.sunoData||[]).findIndex(e=>e.id===s[0].id);sI(t,s[0],e,!0);return}}ep(!1)},sJ=()=>el.filter(e=>"success"===e.state).filter(e=>(e.sunoData?.sunoData||[]).some(e=>!e.deleteFlag&&1!==e.isExpire)),sG=e=>e&&"success"===e.state?(e.sunoData?.sunoData||[]).filter(e=>!e.deleteFlag&&1!==e.isExpire):[],sH=()=>{t9(!1)},sW=()=>{if(!si){if(/^\s*$/.test(O)){R.Am.warning(p("app.styleDescription.stylesInputMessage"));return}so(!0),(0,N.Z)({url:"/api/v1/style/create",method:"post",data:{originalStyle:O}}).then(e=>{200===e.code&&(G(e.data.upSampledStyle),sy(e.data.upSampledStyle)),so(!1)}).catch(e=>{so(!1),console.log(e)})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("section",{id:"app",className:"group/sidebar-wrapper flex h-full flex-col lg:flex-row",children:(0,a.jsxs)("div",{className:"flex h-full w-full items-start pt-2 lg:py-0",children:[(0,a.jsxs)("div",{className:"relative hidden h-full flex-col items-start justify-between border-r border-default-100 p-4 lg:flex lg:w-[25%] lg:overflow-y-auto",children:[(0,a.jsx)("div",{className:"flex w-full flex-1 flex-col overflow-y-auto bg-white/80 px-2 py-2 md:pb-4",children:(0,a.jsx)("div",{className:"mx-auto mb-2 grid w-full grid-cols-1 gap-2 px-2",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-6",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,a.jsxs)("div",{title:p("app.customMode"),className:"flex w-[60%] items-center justify-between space-x-2 rounded-full border border-transparent bg-neutral-400/5 px-2.5 py-2 text-neutral-600",children:[(0,a.jsx)(f,{checked:K,onCheckedChange:sk,id:"custom-mode"}),(0,a.jsx)(g._,{htmlFor:"custom-mode",className:"w-[70%] truncate text-right",children:p("app.customMode")})]}),(0,a.jsx)("div",{className:"flex flex-1 items-center justify-end",children:(0,a.jsx)(J,{selectedType:ti,setSelectedType:to,setModelToSubscribeDialog:e=>{tG(!1),S.user&&0===S.user.checkCountVersion?tm(e):se(e)}})})]}),!K&&(0,a.jsx)("div",{className:"flex w-full flex-col items-start space-y-2",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)(g._,{htmlFor:"song-description",className:"inline-flex items-center gap-1",children:[p("app.songDescription.title"),(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-4 fill-gray-300"})}),(0,a.jsx)(j._v,{side:"bottom",className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:p("app.songDescription.hoverTips")})})]})})]}),(0,a.jsxs)("div",{className:(0,h.cn)("relative w-full rounded-md border px-2 py-1",eO<=0&&tt?"border-rose-600":"border-neutral-200"),children:[(0,a.jsx)("textarea",{ref:ee,value:M,onInput:e=>{sb(e.target.value)},onFocus:()=>ts(!0),onBlur:()=>ts(!1),placeholder:p("app.songDescription.tips"),disabled:K&&X,className:"h-40 w-full resize-none overflow-y-auto border-none bg-transparent p-1 text-sm outline-none disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500 disabled:ring-gray-200"}),(0,a.jsxs)("div",{className:"w-full text-right text-xs text-neutral-400",children:[(0,a.jsx)("span",{className:(0,h.cn)(eO<=0?"font-medium text-rose-600":""),children:199-eO}),(0,a.jsxs)("span",{children:["/",199]})]})]})]})}),K&&!X&&(0,a.jsx)("div",{className:"flex w-full flex-col items-start space-y-2",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)(g._,{htmlFor:"Lyrics",className:"inline-flex items-center gap-1",children:[p("app.lyricsDescription.title"),(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-4 fill-gray-300"})}),(0,a.jsx)(j._v,{side:"bottom",className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:p("app.lyricsDescription.hoverTips")})})]})})]}),(0,a.jsxs)("div",{className:(0,h.cn)("relative w-full rounded-md border px-2 py-1",eM<=0&&ta?"border-rose-600":"border-neutral-200"),children:[(0,a.jsx)("textarea",{ref:ee,value:_,onInput:e=>{sw(e.target.value)},onFocus:()=>tn(!0),onBlur:()=>tn(!1),placeholder:p("app.songDescription.lyricsTips"),disabled:K&&X,className:"h-40 w-full overflow-y-auto border-none bg-transparent p-1 text-sm outline-none"}),(0,a.jsxs)("div",{className:"flex h-[30px] w-full items-center justify-end text-right text-xs text-neutral-400",children:[(0,a.jsx)("button",{className:"align-center absolute bottom-2 left-2 flex h-6 items-center gap-1 rounded-md border border-[#FF7A45] bg-[#fff2ed] px-2 text-xs font-medium text-[#FF7A45] transition-colors duration-200 hover:bg-[#fff5f0]",onClick:()=>tp(!0),children:p("lyricsDailog.lyricsTitle")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:(0,h.cn)(eM<=0?"font-medium text-rose-600":""),children:eL-eM}),(0,a.jsxs)("span",{children:["/",eL]})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f,{checked:X,onCheckedChange:sZ,id:"instrumental"}),(0,a.jsxs)(g._,{htmlFor:"instrumental",className:"inline-flex items-center gap-1",children:[p("app.instrumental.label"),(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-4 fill-gray-300"})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:p("app.instrumental.tips")})})]})})]})]}),K&&(0,a.jsxs)("div",{className:"mt-4 flex w-full flex-col items-start gap-6",children:[(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsxs)("div",{className:"absolute -top-2 left-2 z-10 flex w-full items-center justify-between py-0 pr-4",children:[(0,a.jsxs)("label",{htmlFor:"style-of-music",className:"inline-block inline-flex items-center bg-white px-1 text-xs font-medium text-gray-900",children:[p("app.placeholder.styleMusic.label"),(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-4 fill-gray-300"})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[200px]",children:(0,a.jsx)("p",{children:p("app.styleDescription.hoverTips")})})]})})]}),"Fusion"===ti&&(0,a.jsx)(j.pn,{delayDuration:100,skipDelayDuration:200,children:(0,a.jsxs)(j.u,{children:[(0,a.jsx)(j.aJ,{children:(0,a.jsxs)("button",{onClick:()=>sW(),className:"flex h-[20px] w-[20px] items-center justify-center rounded-full bg-gradient-to-r from-pink-500 to-orange-500 text-white transition-all duration-300",children:[!si&&(0,a.jsx)(x.n,{icon:"wand-sparkles",className:"h-4 w-4 fill-white"}),si&&(0,a.jsx)(d.Z,{color:"#fff",margin:0,size:6})]})}),(0,a.jsx)(j._v,{className:"ml-1 max-w-[260px]",children:(0,a.jsx)("p",{children:p("app.styleDescription.boosterTips")})})]})})]}),(0,a.jsxs)("div",{className:"relative w-full rounded-md border border-gray-200 py-1",children:[(0,a.jsx)("textarea",{value:O,onInput:e=>{sy(e.target.value)},placeholder:p("app.placeholder.styleMusic.des"),className:"mb-2 h-20 w-full resize-none overflow-y-auto border-none bg-transparent p-2 text-sm outline-none disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500 disabled:ring-gray-200"}),(0,a.jsxs)("div",{className:"w-full text-right text-xs text-gray-400",children:[eU-ez,"/",eU]}),(0,a.jsx)("div",{className:"mt-2 w-full rounded-xl bg-default-50",children:(0,a.jsx)(tr,{onStyleSelect:e=>sy(e),selectedStylesInput:O})})]})]}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("label",{htmlFor:"suno-title-music",className:"absolute -top-2 left-2 inline-block bg-white px-1 text-xs font-medium text-gray-900",children:p("app.placeholder.enterTitle.label")}),(0,a.jsx)("input",{value:H,onChange:e=>{sf(e.target.value)},type:"text",name:"suno-title-music",id:"suno-title-music",className:"w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6",placeholder:p("app.placeholder.enterTitle.des")})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f,{checked:tA,onCheckedChange:sU,id:"private"}),(0,a.jsx)(g._,{htmlFor:"private",className:"inline-flex items-center gap-1",children:p("app.private")})]})]})})}),(0,a.jsx)("div",{className:"w-full p-2",children:(0,a.jsxs)("button",{onClick:()=>sS(),className:(0,h.cn)("flex w-full items-center justify-center gap-2 rounded-full p-3 font-semibold text-neutral-50 transition duration-500 hover:scale-95 lg:text-lg","Fusion"===ti?'bg-[url("/images/bg_cover.svg")] bg-cover bg-repeat':"bg-gradient-to-b from-orange-400 to-orange-600"),children:[p("app.generate"),es&&(0,a.jsx)(d.Z,{color:"#FFFFFF",margin:0,size:6})]})})]}),(0,a.jsx)("div",{className:"relative h-full w-full lg:w-[75%]",children:(0,a.jsxs)("div",{className:"flex h-full w-full flex-col-reverse items-start justify-between lg:flex-row",children:[(0,a.jsxs)("div",{className:"relative flex h-full w-full flex-col items-center justify-between lg:w-[70%] lg:px-4 xl:w-[75%]",children:[(0,a.jsxs)("div",{className:"flex h-16 w-full items-center justify-between gap-6 p-4",children:[(0,a.jsx)(eQ,{loading:eo,searchContent:eY,onSearchChange:eX,onSearch:()=>sc(),placeholder:p("app.searchPlaceholder"),onDateRangeChange:e=>{console.log("Date range changed:",e),e?(tM(e.from.getTime()),tO(e.to.getTime())):(tM(null),tO(null))}}),(0,a.jsxs)("div",{className:"inline-block",children:[el.length>0&&(0,a.jsx)(er,{t:p,onStartOperation:e=>{sd(e)}}),th&&(0,a.jsx)(en,{t:p,batchLoading:tb,onAction:()=>{switch(th){case"delete":sm();break;case"download":sx();break;case"library":sp()}},selectedCount:tv.length,operation:th,onCancel:()=>{tj(null),tw([])}})]})]}),(0,a.jsxs)("div",{className:"w-full flex-1 overflow-y-auto px-4 pb-36 lg:px-0",children:[S.user&&0===S.user.checkCountVersion&&el.length>0&&!(S.user&&S.user.vipFlag)&&(0,a.jsx)(z.x,{}),el.map((e,t)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eJ,{record:e,selectRecordSuno:sI,selectRecordItem:eu,playing:ex,downloadFile:sF,downloadWavFile:sP,extend:sR,generateLoading:es,setOpenPopoverId:tW,deleteAudio:sL,collectMusic:sT,downloadMp4File:sj,shareData:e2,setShareData:e5,batchOperation:th,handleSelectItemChange:su,selectedItemList:tv,handelVocalRemovalDialog:sE,handleLicenseDialogChange:sM,updateRecordListByIds:sA,reusePrompt:s$,handleStemSplitterDialog:sO},e.id),!(S.user&&0===S.user.checkCountVersion)&&0===t&&!(S.user&&S.user.vipFlag)&&t7&&(0,a.jsx)(tf,{onClose:sH})]})),0===el.length&&!eo&&(0,a.jsx)("div",{className:"w-full text-center",children:(0,a.jsx)(w.Z,{image:w.Z.PRESENTED_IMAGE_SIMPLE})}),eo&&(0,a.jsx)("div",{className:"w-full py-6 text-center",children:(0,a.jsx)(u.Z,{color:"#f97e28"})}),(0,a.jsx)("div",{className:"block w-full px-3.5 py-2 lg:hidden",children:t&&s&&!(S.user&&S.user.vipFlag)&&(0,a.jsx)($.W7,{adData:t,onClose:()=>n(!1),styleData:{borderStyle1:"#ea580c",borderStyle2:"#cbb6c0",borderStyle3:"#e8529e",primaryColor:"#ea580c"}})}),eF&&!eo&&(0,a.jsx)("div",{className:"relative mt-10 flex w-full items-center justify-center",children:(0,a.jsxs)("div",{onClick:()=>sc(!0),className:"group inline-flex w-auto cursor-pointer items-center justify-center gap-1 rounded-full bg-black/5 px-4 py-2 text-neutral-500 transition duration-500",children:[(0,a.jsx)(x.n,{icon:"downArrow",className:"w-3 fill-neutral-500 group-hover:animate-bounce"}),(0,a.jsx)("span",{className:"text-xs",children:"More"})]})})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[eu&&eu.item&&0===eu.item.isExpire&&"fail"!==eu.record.state&&(0,a.jsx)("div",{className:(0,h.cn)(["h-18 w-full items-center justify-center bg-orange-300/5 pr-4 backdrop-blur-md","z-5 absolute hidden lg:flex",tq?"fixed z-[21] flex":"","bottom-0 left-0"]),children:eu.item&&eu.audioUrl?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute right-4 top-0 hidden transform md:inline-block",children:(0,a.jsxs)("span",{className:"text-xs text-neutral-400",children:[p("app.tip.tip1")," ",(0,a.jsx)("span",{className:"font-medium text-orange-500",children:p("app.tip.tip2")})," ",p("app.tip.tip3")]})}),(0,a.jsx)(C.Z,{src:eu.audioUrl,ref:eR,autoPlay:!1,autoPlayAfterSrcChange:!1,onPlay:()=>ep(!0),onPause:()=>ep(!1),onEnded:sV,layout:"horizontal",progressJumpStep:15e3,progressUpdateInterval:50,customIcons:{play:(0,a.jsx)(x.n,{icon:"audio_play",className:"h-6 w-6 fill-orange-600"}),pause:(0,a.jsx)(x.n,{icon:"audio_pause",className:"h-6 w-6 fill-orange-600"}),rewind:(0,a.jsx)(x.n,{icon:"audio_rewind",className:"h-6 w-6 fill-orange-600"}),forward:(0,a.jsx)(x.n,{icon:"audio_forward",className:"h-6 w-6 fill-orange-600"}),volume:(0,a.jsx)(x.n,{icon:"audio_sound_open",className:"h-4 w-4 fill-orange-600 lg:h-5 lg:w-5"}),volumeMute:(0,a.jsx)(x.n,{icon:"audio_sound_close",className:"h-4 w-4 fill-orange-600 lg:h-5 lg:w-5"})},customProgressBarSection:[(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(tl.e,{className:"max-w-[300px]",isOpen:t4,defaultOpen:t4,onOpenChange:t6,content:(0,a.jsx)("div",{className:"whitespace-pre-line break-words p-2 text-sm text-default-900",children:"list"===t5?p("app.playMode.listLoop"):"single"===t5?p("app.playMode.singleLoop"):p("app.playMode.randomPlay")}),children:(0,a.jsx)("button",{onClick:()=>{"list"===t5?t3("single"):"single"===t5?t3("random"):t3("list"),t6(!0)},className:"absolute -bottom-1 left-[80px] mr-2 flex items-center justify-center md:static",children:"list"===t5?(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 fill-neutral-500 hover:fill-orange-500",children:(0,a.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"})}):"single"===t5?(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 fill-orange-500 hover:fill-orange-400",children:(0,a.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4zm-4-2V9h-1l-2 1v1h1.5v4H13z"})}):(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 fill-orange-500 hover:fill-orange-400",children:(0,a.jsx)("path",{d:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"})})},"play-mode")})}),C.s.MAIN_CONTROLS,C.s.CURRENT_TIME,C.s.PROGRESS_BAR,C.s.DURATION],customControlsSection:[C.s.VOLUME],className:"w-full !py-6 !shadow-none"}),"success"===eu.record.state&&(0,a.jsxs)(a.Fragment,{children:[eu.item.collected?(0,a.jsx)("div",{className:`group inline-flex items-center justify-center gap-2 px-2 py-1 transition duration-300 ${tY?"cursor-not-allowed":"cursor-pointer"}`,children:tY?(0,a.jsx)(m.Z,{loading:!0,color:"#ee7d1f",size:20}):(0,a.jsx)(x.n,{onClick:async e=>{e.stopPropagation();try{tX(!0),await sT(eu.record.id,eu.itemIndex,!1,eu.item)}finally{tX(!1)}},icon:"music_collect_1",className:"w-5 fill-rose-500 transition duration-300"})}):(0,a.jsx)("div",{className:`group inline-flex items-center justify-center gap-2 p-1 transition duration-300 ${tY?"cursor-not-allowed":"cursor-pointer"}`,children:tY?(0,a.jsx)(m.Z,{loading:!0,color:"#ee7d1f",size:20}):(0,a.jsx)(x.n,{onClick:async e=>{e.stopPropagation();try{tX(!0),await sT(eu.record.id,eu.itemIndex,!0,eu.item)}finally{tX(!1)}},icon:"music_collect",className:"w-5 fill-black transition duration-300 group-hover:fill-rose-500"})}),(0,a.jsx)("div",{onClick:e=>{e.stopPropagation(),"success"===eu.record.state&&e5({item:eu.item,itemIndex:eu.itemIndex,recordId:eu.record.id,recordPath:eu.record.recordPath})},className:`group inline-flex items-center justify-center gap-2 p-1 transition duration-300 ${"success"===eu.record.state?"cursor-pointer text-white hover:text-orange-500":"cursor-not-allowed text-neutral-500"}`,children:(0,a.jsx)(x.n,{icon:"music_share",className:(0,h.cn)("w-5 transition duration-300","success"===eu.record.state?"fill-black group-hover:fill-orange-500":"fill-neutral-500")})}),(0,a.jsxs)(B.J2,{open:tH===eu.itemIndex,onOpenChange:()=>tW(tH===eu.itemIndex?null:eu.itemIndex),children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsxs)("div",{onClick:()=>tW(`download-${eu.record.id}-${eu.itemIndex}`),className:"group inline-flex cursor-pointer items-center justify-center gap-2 p-1 transition duration-300 hover:text-orange-500",children:[(0,a.jsx)(x.n,{icon:"music_download",className:"w-5 fill-black transition duration-300 group-hover:fill-orange-500"}),("generating"===eu.wavStatus||"generating"===eu.mp4State)&&(0,a.jsxs)("span",{className:"absolute bottom-0 right-0 flex h-2 w-2",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-orange-500 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-orange-500"})]})]})}),(0,a.jsx)(B.yk,{className:"w-auto max-w-52 px-0 py-2",children:(0,a.jsxs)("ul",{className:"flex w-full flex-col items-start text-sm",children:[(0,a.jsx)("li",{onClick:e=>{tW(null),e.stopPropagation(),sF(eu.audioUrl,eu.item.title)},className:"group inline-flex cursor-pointer items-center justify-center px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:p("app.downloadMP3")}),(0,a.jsxs)("li",{onClick:e=>{e.stopPropagation(),"generating"!==eu.mp4State&&"success"===eu.record.state&&sj(eu.item,eu.record.id,eu.itemIndex).then(()=>{tW(null)})},className:"group inline-flex w-full cursor-pointer items-center justify-between gap-3 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:[p("app.downloadMP4"),(0,a.jsx)("div",{className:"inline-flex items-center gap-1",children:"generating"===eu.item.mp4State?(0,a.jsx)(m.Z,{loading:!0,color:"#c840d8",size:14}):"success"===eu.item.mp4State?(0,a.jsx)(x.n,{icon:"music_download_success",className:"w-4 fill-orange-600"}):"fail"===eu.item.mp4State?(0,a.jsx)(x.n,{icon:"music_download_fail",className:"w-4 fill-rose-600"}):null})]}),(0,a.jsxs)("li",{onClick:e=>{e.stopPropagation(),"success"!==eu.item.wavStatus&&eu.item.wavStatus||"success"!==eu.record.state||sP(eu.item,eu.record.id,eu.itemIndex).then(()=>{tW(null)})},className:"group inline-flex w-full cursor-pointer items-center justify-between gap-3 px-3 py-2 text-neutral-700 transition duration-300 hover:text-orange-500",children:[p("app.downloadWAV"),(0,a.jsx)("div",{className:"inline-flex items-center gap-1",children:"generating"===eu.item.wavStatus?(0,a.jsx)(m.Z,{loading:!0,color:"#c840d8",size:14}):"success"===eu.item.wavStatus?(0,a.jsx)(x.n,{icon:"music_download_success",className:"w-4 fill-orange-600"}):"fail"===eu.item.wavStatus?(0,a.jsx)(x.n,{icon:"music_download_fail",className:"w-4 fill-rose-600"}):null})]})]})})]})]})]}):(0,a.jsx)(y.O,{className:"h-4 w-[120px] bg-white/20 lg:w-[300px]"})}),(0,a.jsx)(te.Z,{generateLoading:es,setShowMobileCreateDrawer:tG,selectRecordItem:eu,playing:ex,audioAutoPlay:s_,setSelectItemDialog:tK,isMusicGeneratePage:!0}),(0,a.jsx)(e8.dy,{open:tJ,onOpenChange:tG,children:(0,a.jsx)(e8.sc,{children:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,a.jsx)(e8.OX,{children:(0,a.jsxs)(e8.iI,{className:"flex flex-col items-center justify-center gap-1 text-sm",children:[(0,a.jsx)(x.n,{icon:"logo",className:"w-5 fill-zinc-800"}),"MUSICHERO AI"]})}),(0,a.jsxs)("div",{className:"flex max-h-[70vh] w-full flex-col items-start justify-between",children:[(0,a.jsx)("div",{className:"mx-auto mb-2 grid w-full flex-1 grid-cols-1 gap-2 overflow-y-auto px-2 pr-2",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,a.jsxs)("div",{title:p("app.customMode"),className:"flex w-[60%] items-center justify-between space-x-2 rounded-full border border-transparent bg-gray-500/5 p-2.5 text-neutral-500",children:[(0,a.jsx)(f,{checked:K,onCheckedChange:sk,id:"custom-mode"}),(0,a.jsx)(g._,{htmlFor:"custom-mode",className:"w-[70%] truncate text-right",children:p("app.customMode")})]}),(0,a.jsx)("div",{className:"flex flex-1 items-center justify-end",children:(0,a.jsx)(J,{selectedType:ti,setSelectedType:to,setModelToSubscribeDialog:e=>{tG(!1),S.user&&0===S.user.checkCountVersion?tm(e):se(e)}})})]}),!K&&(0,a.jsx)("div",{className:"flex w-full flex-col items-start space-y-2",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",children:[(0,a.jsxs)(g._,{htmlFor:"song-description",className:"inline-flex items-center gap-1 px-2 text-sm text-gray-600",children:[p("app.songDescription.title"),(0,a.jsxs)(B.J2,{children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-5 fill-gray-300"})})}),(0,a.jsx)(B.yk,{className:"w-60",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:p("app.songDescription.hoverTips")})})]})]}),(0,a.jsxs)("div",{className:"relative w-full rounded-md border border-gray-500/20 bg-gray-500/5 px-2 py-1",children:[(0,a.jsx)("textarea",{ref:ee,value:M,onInput:e=>{sb(e.target.value)},placeholder:p("app.songDescription.tips"),className:"disabled:text-gray-1000 h-24 w-full resize-none overflow-y-auto border-none bg-transparent p-1 text-sm text-gray-600 outline-none disabled:cursor-not-allowed disabled:ring-gray-200"}),(0,a.jsxs)("div",{className:"w-full text-right text-xs text-gray-400",children:[199-eO,"/",199]})]})]})}),K&&!X&&(0,a.jsx)("div",{className:"flex w-full flex-col items-start space-y-2",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",children:[(0,a.jsxs)(g._,{htmlFor:"Lyrics",className:"inline-flex items-center gap-1 px-2 text-sm text-gray-600",children:[p("app.lyricsDescription.title"),(0,a.jsxs)(B.J2,{children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-5 fill-gray-300"})})}),(0,a.jsx)(B.yk,{className:"w-60",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:p("app.lyricsDescription.hoverTips")})})]})]}),(0,a.jsxs)("div",{className:"relative w-full rounded-md border border-gray-500/20 bg-gray-500/5 px-2 py-1",children:[(0,a.jsx)("textarea",{ref:ee,value:_,onInput:e=>{sw(e.target.value)},placeholder:p("app.songDescription.lyricsTips"),disabled:K&&X,className:"disabled:text-gray-1000 h-20 w-full overflow-y-auto border-none bg-transparent p-1 text-sm text-gray-600 outline-none disabled:cursor-not-allowed disabled:ring-gray-200"}),(0,a.jsxs)("div",{className:"flex h-[30px] w-full items-center justify-end text-right text-xs text-neutral-400",children:[(0,a.jsx)("button",{className:"absolute bottom-2 left-2 flex h-6 items-center gap-1 rounded-md border border-[var(--tool-color-primary)] bg-[var(--tool-color-primary)] px-2 text-xs font-medium text-[#fff] transition-colors duration-200 hover:bg-[#fff5f0]",onClick:()=>tp(!0),children:(0,a.jsx)("span",{children:p("lyricsDailog.lyricsTitle")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:(0,h.cn)(eM<=0?"font-medium text-rose-600":""),children:eL-eM}),(0,a.jsxs)("span",{children:["/",eL]})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-between rounded-lg bg-gray-500/5 p-2",children:[(0,a.jsxs)(g._,{htmlFor:"instrumental",className:"inline-flex items-center gap-1 px-2 text-gray-600",children:[p("app.instrumental.label"),(0,a.jsxs)(B.J2,{children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-5 fill-gray-300"})})}),(0,a.jsx)(B.yk,{className:"w-60",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:p("app.instrumental.tips")})})]})]}),(0,a.jsx)(f,{checked:X,onCheckedChange:sZ,id:"instrumental"})]}),K&&(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-6",children:[(0,a.jsxs)("div",{className:"relative flex w-full flex-col items-start gap-2",children:[(0,a.jsxs)("label",{htmlFor:"style-of-music",className:"inline-flex items-center gap-1 px-2 text-sm text-gray-600",children:[p("app.placeholder.styleMusic.label"),(0,a.jsxs)(B.J2,{children:[(0,a.jsx)(B.xo,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(x.n,{icon:"hover_tips",className:"w-5 fill-gray-300"})})}),(0,a.jsx)(B.yk,{className:"w-60",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:p("app.styleDescription.hoverTips")})})]})]}),(0,a.jsxs)("div",{className:"relative w-full rounded-md border border-gray-500/20 bg-gray-500/5 px-2 py-1",children:[(0,a.jsx)("textarea",{value:O,onInput:e=>{sy(e.target.value)},placeholder:p("app.placeholder.styleMusic.des"),disabled:K&&X,className:"disabled:text-gray-1000 h-24 w-full resize-none overflow-y-auto border-none bg-transparent p-1 text-sm text-gray-600 outline-none disabled:cursor-not-allowed disabled:ring-gray-200"}),(0,a.jsxs)("div",{className:"w-full text-right text-xs text-gray-400",children:[eU-ez,"/",eU]}),(0,a.jsx)("div",{className:"mt-2 w-full rounded-xl bg-default-500/10",children:(0,a.jsx)(tr,{onStyleSelect:e=>sy(e),selectedStylesInput:O})})]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",children:[(0,a.jsx)("label",{htmlFor:"suno-title-music",className:"inline-flex items-center gap-1 px-2 text-sm text-gray-600",children:p("app.placeholder.enterTitle.label")}),(0,a.jsx)("input",{value:H,onChange:e=>sf(e.target.value),type:"text",name:"suno-title-music",id:"suno-title-music",autoComplete:"off",className:"w-full rounded-md border border-gray-500/20 bg-gray-500/5 p-2 text-gray-600 shadow-sm outline-none placeholder:text-gray-400 focus:outline-none",placeholder:p("app.placeholder.enterTitle.des")})]})]}),(0,a.jsxs)("div",{title:p("app.private"),className:"flex w-1/2 items-center justify-between space-x-2 rounded-full border border-transparent bg-white/5 p-2.5 text-neutral-700",children:[(0,a.jsx)(f,{checked:tA,onCheckedChange:sU,id:"private"}),(0,a.jsx)(g._,{htmlFor:"private",className:"w-[70%] truncate text-right",children:p("app.private")})]})]})}),(0,a.jsx)(e8.ze,{className:"w-full",children:(0,a.jsxs)("button",{"aria-label":"Create",onClick:()=>sS(),className:"flex w-full items-center justify-center gap-1 rounded-lg bg-orange-500 p-3 font-medium text-white transition duration-500 hover:bg-orange-600",children:[p("app.generate"),es||eB?(0,a.jsx)(d.Z,{color:"#FFFFFF",margin:0,size:5}):(0,a.jsx)(x.n,{icon:"music_1",className:"h-4 w-4 fill-white"})]})})]})]})})}),tq&&eu&&(0,a.jsxs)("div",{className:"fixed left-0 top-0 z-20 flex h-full w-full flex-col items-start gap-2 overflow-y-auto bg-white pb-36 lg:hidden",children:[(0,a.jsx)("div",{onClick:()=>tK(!1),className:"fixed left-4 top-4 z-20 inline-flex h-8 w-8 cursor-pointer items-center justify-center rounded-full bg-black/10",children:(0,a.jsx)(x.n,{icon:"music_back",className:"w-5 fill-white"})}),(0,a.jsx)(ey,{record:eu.record,item:eu.item,playing:ex,audioPlayerRef:eR}),(0,a.jsx)(eN,{paramData:eu.record.paramData})]})]})]}),eu&&(0,a.jsxs)("div",{className:"mb-10 hidden w-full flex-col items-start gap-2 bg-default-400/5 lg:mb-0 lg:flex lg:h-full lg:w-[30%] lg:overflow-y-auto xl:w-[25%]",children:[(0,a.jsx)(ey,{record:eu.record,item:eu.item,playing:ex,audioPlayerRef:eR}),(0,a.jsx)(eN,{paramData:eu.record.paramData})]})]})})]})}),(0,a.jsx)(P.g,{verifyChatLoading:eB,success:e=>{e?(eG(!1),sC(e)):sD()},error:sD}),eh&&(0,a.jsx)(k.M,{setIsCreditsSignInPopup:ej}),ev&&(0,a.jsx)(L.Z,{setMaintenanceTipsFlag:ew,tipsMessage:eb}),(0,a.jsx)(Z.Z,{isDownloadDialog:eS,setIsDownloadDialog:eC}),e0&&(0,a.jsx)(U.Z,{isBuyVipDialog:e0,setIsBuyVipDialog:e1}),e6&&(0,a.jsx)(V.Z,{isLimitNoticeDialog:e6,setIsLimitNoticeDialog:e7}),(0,a.jsx)(b.Z,{title:p("app.upgradeModal.title"),open:ek,onOk:()=>{D.push("/pricing")},onCancel:()=>eZ(!1),centered:!0,maskClosable:!1,okText:p("app.upgradeModal.okText"),cancelText:p("app.upgradeModal.cancel"),okButtonProps:{style:{backgroundColor:"#FB923C"}},cancelButtonProps:{style:{display:"white"}},children:(0,a.jsx)("div",{className:"w-full py-4",children:p("app.upgradeModal.content")})}),(0,a.jsx)(A,{extendRecordInfo:eq,loadRecordList:sc,generateLoading:es,setGenerateLoading:ea,isExtendDialog:eH,setIsExtendDialog:eW}),(0,a.jsx)(et,{openDialog:tx,setOpenDialog:tp,setAppLyrics:sw,setAppTitle:sf}),(0,a.jsx)(W,{modelToSubscribeDialog:tu,setModelToSubscribeDialog:tm}),(0,a.jsx)(ec,{vocalRemovalDialog:tS,setVocalRemovalDialog:tC,vocalRemovalInfo:tk}),(0,a.jsx)(tc,{stemSplitterDialog:tQ,setStemSplitterDialog:t0,stemSplitterInfo:t1}),(0,a.jsx)(ef,{openDialog:tI,setOpenDialog:t_,user:S?.user||null,licenseItem:tR}),(0,a.jsx)(eg,{openDialog:tF,setOpenDialog:tP}),(0,a.jsx)(e9,{privateDialog:tV,setPrivateDialog:tB}),(0,a.jsx)(td.Z,{isOpen:t8,onClose:()=>se(!1),showProList:st,setSubscribeShowPro:ss}),sr&&(0,a.jsx)(tg,{onClose:()=>sn(!1),pendingRecordSize:sa.length,setGoToSubscribePlanModal:se})]})});var tv=s(33326),tw=s.n(tv);s(48100);var tb=s(55832),ty=!0;let tN=(0,_.Pi)(e=>{let{adDataAppBottomRightPopup:t}=e,{t:s}=(0,r.Z)("home"),{userStore:n}=(0,I.o)(),[i,o]=(0,l.useState)(!0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(tw(),{children:[(0,a.jsx)("title",{children:s("head.title")}),(0,a.jsx)("meta",{name:"description",content:s("head.description")}),(0,a.jsx)("meta",{name:"robots",content:"noindex"})]}),(0,a.jsx)("div",{className:"relative h-full w-full",children:(0,a.jsx)("main",{className:"h-full",children:(0,a.jsxs)(tb.Z,{selectedKey:"app",children:[(0,a.jsx)(tj,{adDataAppBottomRightPopup:t,openAdvertisement:i,setOpenAdvertisement:o}),t&&i&&!(n.user&&n.user.vipFlag)&&(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)($.do,{adData:t,onClose:()=>o(!1),styleData:{borderStyle1:"#ea580c",borderStyle2:"#cbb6c0",borderStyle3:"#e8529e",primaryColor:"#ea580c"}})})]})})})]})});var tD=tN;let tS="experimental-edge"}},function(e){e.O(0,[461,4407,8179,7409,7847,5443,6083,2462,7092,7276,4466,5596,1714,8413,4351,6942,7993,7811,811,384,5053,5832,9188,8044,2888,9774,179],function(){return e(e.s=66898)}),_N_E=e.O()}]);